<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>科研项目管理系统详细设计方案</title>
    <style>
        /* 打印样式配置 */
        @page {
            size: A4;
            margin: 2cm 1.5cm;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", "SimSun", sans-serif;
            font-size: 14pt; /* 增大字体 */
            line-height: 1.8;
            color: #333;
            background: #fff;
        }
        
        .container {
            max-width: 21cm;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* 封面 */
        .cover {
            page-break-after: always;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
        }
        
        .cover h1 {
            font-size: 48pt;
            margin-bottom: 30px;
            font-weight: bold;
        }
        
        .cover h2 {
            font-size: 32pt;
            margin-bottom: 60px;
        }
        
        .cover .info {
            font-size: 18pt;
            margin-top: 80px;
        }
        
        .cover .info p {
            margin: 15px 0;
        }
        
        /* 目录 */
        .toc {
            page-break-after: always;
            padding: 40px 0;
        }
        
        .toc h1 {
            font-size: 36pt;
            margin-bottom: 40px;
            text-align: center;
            color: #667eea;
        }
        
        .toc-item {
            margin: 20px 0;
            padding: 12px;
            border-bottom: 1px solid #eee;
            font-size: 16pt;
        }
        
        .toc-item.level-1 {
            font-weight: bold;
            font-size: 18pt;
            color: #667eea;
        }
        
        .toc-item.level-2 {
            padding-left: 40px;
            font-size: 15pt;
        }
        
        .toc-item.level-3 {
            padding-left: 80px;
            font-size: 14pt;
            color: #666;
        }
        
        /* 章节 */
        .chapter {
            page-break-before: always;
            padding: 40px 0;
        }
        
        h1 {
            font-size: 32pt;
            color: #667eea;
            margin: 40px 0 30px 0;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        
        h2 {
            font-size: 24pt;
            color: #764ba2;
            margin: 35px 0 25px 0;
            padding-left: 15px;
            border-left: 5px solid #764ba2;
        }
        
        h3 {
            font-size: 20pt;
            color: #555;
            margin: 30px 0 20px 0;
        }
        
        h4 {
            font-size: 17pt;
            color: #666;
            margin: 25px 0 15px 0;
        }
        
        p {
            margin: 15px 0;
            text-indent: 2em;
            text-align: justify;
            font-size: 14pt;
            line-height: 2;
        }
        
        /* 表格 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            font-size: 13pt;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: left;
        }
        
        th {
            background-color: #667eea;
            color: white;
            font-weight: bold;
            font-size: 14pt;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        /* 代码块 */
        pre {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 25px 0;
            overflow-x: auto;
            font-size: 12pt;
            line-height: 1.6;
            page-break-inside: avoid;
        }
        
        code {
            font-family: "Courier New", monospace;
            background-color: #f5f5f5;
            padding: 3px 6px;
            border-radius: 3px;
            font-size: 12pt;
        }
        
        /* 列表 */
        ul, ol {
            margin: 20px 0 20px 40px;
            font-size: 14pt;
            line-height: 2;
        }
        
        li {
            margin: 12px 0;
        }
        
        /* 提示框 */
        .note, .warning, .important {
            padding: 20px;
            margin: 25px 0;
            border-left: 5px solid;
            background-color: #f9f9f9;
            page-break-inside: avoid;
            font-size: 14pt;
        }
        
        .note {
            border-color: #3498db;
            background-color: #e3f2fd;
        }
        
        .warning {
            border-color: #f39c12;
            background-color: #fff3cd;
        }
        
        .important {
            border-color: #e74c3c;
            background-color: #ffebee;
        }
        
        .note strong, .warning strong, .important strong {
            display: block;
            margin-bottom: 10px;
            font-size: 16pt;
        }
        
        /* 图表 */
        .figure {
            margin: 35px 0;
            text-align: center;
            page-break-inside: avoid;
        }
        
        .figure img {
            max-width: 100%;
            border: 1px solid #ddd;
            padding: 10px;
            background: white;
        }
        
        .figure-caption {
            margin-top: 15px;
            font-size: 13pt;
            color: #666;
            font-style: italic;
        }
        
        /* 流程图样式 */
        .flowchart {
            background: #f9f9f9;
            border: 2px solid #667eea;
            padding: 30px;
            margin: 30px 0;
            border-radius: 8px;
            page-break-inside: avoid;
        }
        
        .flowchart-step {
            background: white;
            border: 2px solid #764ba2;
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
            font-size: 14pt;
            text-align: center;
        }
        
        .flowchart-arrow {
            text-align: center;
            font-size: 20pt;
            color: #667eea;
            margin: 10px 0;
        }
        
        /* 页眉页脚 */
        @media print {
            .chapter {
                page-break-before: always;
            }
            
            h1, h2, h3 {
                page-break-after: avoid;
            }
            
            table, figure, .note, .warning, .important {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>

<!-- 封面 -->
<div class="cover">
    <h1>科研项目管理系统</h1>
    <h2>详细设计方案</h2>
    <div class="info">
        <p><strong>项目名称：</strong>科研项目全生命周期管理系统</p>
        <p><strong>文档版本：</strong>V2.0</p>
        <p><strong>编制日期：</strong>2025年1月</p>
        <p><strong>技术架构：</strong>Next.js + Spring Boot + KingbaseES</p>
        <p><strong>部署环境：</strong>麒麟操作系统 + 人大金仓数据库</p>
    </div>
</div>

<!-- 目录 -->
<div class="toc">
    <h1>目 录</h1>
    
    <div class="toc-item level-1">第一章 项目概述</div>
    <div class="toc-item level-2">1.1 项目背景</div>
    <div class="toc-item level-2">1.2 项目目标</div>
    <div class="toc-item level-2">1.3 项目范围</div>
    <div class="toc-item level-2">1.4 项目约束</div>
    <div class="toc-item level-2">1.5 术语定义</div>
    
    <div class="toc-item level-1">第二章 需求分析</div>
    <div class="toc-item level-2">2.1 业务需求分析</div>
    <div class="toc-item level-3">2.1.1 科研机构端需求</div>
    <div class="toc-item level-3">2.1.2 监测监管端需求</div>
    <div class="toc-item level-3">2.1.3 专家评审端需求</div>
    <div class="toc-item level-2">2.2 功能需求分析</div>
    <div class="toc-item level-3">2.2.1 需求管理功能</div>
    <div class="toc-item level-3">2.2.2 项目申报功能</div>
    <div class="toc-item level-3">2.2.3 任务书管理功能</div>
    <div class="toc-item level-3">2.2.4 项目变更功能</div>
    <div class="toc-item level-3">2.2.5 中期检查功能</div>
    <div class="toc-item level-3">2.2.6 年度检查功能</div>
    <div class="toc-item level-3">2.2.7 项目验收功能</div>
    <div class="toc-item level-3">2.2.8 成果管理功能</div>
    <div class="toc-item level-3">2.2.9 专家管理功能</div>
    <div class="toc-item level-3">2.2.10 流程引擎功能</div>
    <div class="toc-item level-2">2.3 非功能需求分析</div>
    <div class="toc-item level-3">2.3.1 性能需求</div>
    <div class="toc-item level-3">2.3.2 安全需求</div>
    <div class="toc-item level-3">2.3.3 可用性需求</div>
    <div class="toc-item level-3">2.3.4 兼容性需求</div>
    
    <div class="toc-item level-1">第三章 系统架构设计</div>
    <div class="toc-item level-2">3.1 总体架构设计</div>
    <div class="toc-item level-2">3.2 技术架构设计</div>
    <div class="toc-item level-3">3.3.1 前端架构</div>
    <div class="toc-item level-3">3.3.2 后端架构</div>
    <div class="toc-item level-3">3.3.3 数据库架构</div>
    <div class="toc-item level-2">3.3 部署架构设计</div>
    <div class="toc-item level-2">3.4 网络架构设计</div>
    <div class="toc-item level-2">3.5 安全架构设计</div>
    
    <div class="toc-item level-1">第四章 数据库设计</div>
    <div class="toc-item level-2">4.1 数据库选型</div>
    <div class="toc-item level-2">4.2 数据库架构</div>
    <div class="toc-item level-2">4.3 表结构设计</div>
    <div class="toc-item level-3">4.3.1 用户权限表</div>
    <div class="toc-item level-3">4.3.2 需求管理表</div>
    <div class="toc-item level-3">4.3.3 项目管理表</div>
    <div class="toc-item level-3">4.3.4 评审管理表</div>
    <div class="toc-item level-3">4.3.5 成果管理表</div>
    <div class="toc-item level-3">4.3.6 流程引擎表</div>
    <div class="toc-item level-2">4.4 索引设计</div>
    <div class="toc-item level-2">4.5 数据字典</div>
    
    <div class="toc-item level-1">第五章 功能模块详细设计</div>
    <div class="toc-item level-2">5.1 用户认证与授权</div>
    <div class="toc-item level-2">5.2 科研机构端</div>
    <div class="toc-item level-3">5.2.1 需求征集模块</div>
    <div class="toc-item level-3">5.2.2 项目申报模块</div>
    <div class="toc-item level-3">5.2.3 任务书管理模块</div>
    <div class="toc-item level-3">5.2.4 项目变更模块</div>
    <div class="toc-item level-3">5.2.5 中期检查模块</div>
    <div class="toc-item level-3">5.2.6 年度检查模块</div>
    <div class="toc-item level-3">5.2.7 项目验收模块</div>
    <div class="toc-item level-3">5.2.8 成果管理模块</div>
    <div class="toc-item level-2">5.3 监测监管端</div>
    <div class="toc-item level-3">5.3.1 需求审核模块</div>
    <div class="toc-item level-3">5.3.2 申报审核模块</div>
    <div class="toc-item level-3">5.3.3 任务书审核模块</div>
    <div class="toc-item level-3">5.3.4 变更审核模块</div>
    <div class="toc-item level-3">5.3.5 检查审核模块</div>
    <div class="toc-item level-3">5.3.6 验收审核模块</div>
    <div class="toc-item level-3">5.3.7 成果审核模块</div>
    <div class="toc-item level-3">5.3.8 流程配置模块</div>
    <div class="toc-item level-3">5.3.9 权限管理模块</div>
    <div class="toc-item level-2">5.4 专家评审端</div>
    <div class="toc-item level-3">5.4.1 评审任务模块</div>
    <div class="toc-item level-3">5.4.2 在线评审模块</div>
    <div class="toc-item level-3">5.4.3 评审历史模块</div>
    
    <div class="toc-item level-1">第六章 接口设计</div>
    <div class="toc-item level-2">6.1 API接口规范</div>
    <div class="toc-item level-2">6.2 用户认证接口</div>
    <div class="toc-item level-2">6.3 需求管理接口</div>
    <div class="toc-item level-2">6.4 项目管理接口</div>
    <div class="toc-item level-2">6.5 评审管理接口</div>
    <div class="toc-item level-2">6.6 文件管理接口</div>
    <div class="toc-item level-2">6.7 流程引擎接口</div>
    
    <div class="toc-item level-1">第七章 前端设计</div>
    <div class="toc-item level-2">7.1 技术选型</div>
    <div class="toc-item level-2">7.2 组件设计</div>
    <div class="toc-item level-2">7.3 页面原型设计</div>
    <div class="toc-item level-3">7.3.1 登录注册页面</div>
    <div class="toc-item level-3">7.3.2 科研机构工作台</div>
    <div class="toc-item level-3">7.3.3 项目申报页面</div>
    <div class="toc-item level-3">7.3.4 任务书管理页面</div>
    <div class="toc-item level-3">7.3.5 中期年度检查页面</div>
    <div class="toc-item level-3">7.3.6 监管端审核页面</div>
    <div class="toc-item level-3">7.3.7 流程配置页面</div>
    <div class="toc-item level-2">7.4 交互设计规范</div>
    
    <div class="toc-item level-1">第八章 安全设计</div>
    <div class="toc-item level-2">8.1 身份认证</div>
    <div class="toc-item level-2">8.2 权限控制</div>
    <div class="toc-item level-2">8.3 数据加密</div>
    <div class="toc-item level-2">8.4 审计日志</div>
    <div class="toc-item level-2">8.5 安全防护</div>
    
    <div class="toc-item level-1">第九章 性能优化</div>
    <div class="toc-item level-2">9.1 前端性能优化</div>
    <div class="toc-item level-2">9.2 后端性能优化</div>
    <div class="toc-item level-2">9.3 数据库性能优化</div>
    <div class="toc-item level-2">9.4 缓存策略</div>
    
    <div class="toc-item level-1">第十章 部署方案</div>
    <div class="toc-item level-2">10.1 环境准备</div>
    <div class="toc-item level-3">10.1.1 麒麟操作系统配置</div>
    <div class="toc-item level-3">10.1.2 人大金仓数据库安装</div>
    <div class="toc-item level-3">10.1.3 JDK环境配置</div>
    <div class="toc-item level-3">10.1.4 Node.js环境配置</div>
    <div class="toc-item level-2">10.2 应用部署</div>
    <div class="toc-item level-3">10.2.1 前端应用部署</div>
    <div class="toc-item level-3">10.2.2 后端应用部署</div>
    <div class="toc-item level-2">10.3 数据库部署</div>
    <div class="toc-item level-2">10.4 Nginx配置</div>
    <div class="toc-item level-2">10.5 SSL证书配置</div>
    <div class="toc-item level-2">10.6 监控配置</div>
    
    <div class="toc-item level-1">第十一章 测试方案</div>
    <div class="toc-item level-2">11.1 单元测试</div>
    <div class="toc-item level-2">11.2 集成测试</div>
    <div class="toc-item level-2">11.3 系统测试</div>
    <div class="toc-item level-2">11.4 性能测试</div>
    <div class="toc-item level-2">11.5 安全测试</div>
    
    <div class="toc-item level-1">第十二章 运维方案</div>
    <div class="toc-item level-2">12.1 日常运维</div>
    <div class="toc-item level-2">12.2 故障处理</div>
    <div class="toc-item level-2">12.3 备份恢复</div>
    <div class="toc-item level-2">12.4 版本升级</div>
    
    <div class="toc-item level-1">附录</div>
    <div class="toc-item level-2">附录A：数据字典</div>
    <div class="toc-item level-2">附录B：API接口清单</div>
    <div class="toc-item level-2">附录C：配置文件示例</div>
    <div class="toc-item level-2">附录D：常见问题FAQ</div>
</div>

<!-- 第一章 项目概述 -->
<div class="chapter">
    <h1>第一章 项目概述</h1>
    
    <h2>1.1 项目背景</h2>
    <p>随着科研管理工作的不断深入，传统的科研项目管理模式已经无法满足现代科研管理的需求。科研项目管理涉及需求征集、项目申报、立项评审、任务书签订、项目实施、中期检查、年度检查、结题验收、成果管理等多个环节，管理流程复杂，参与主体众多，信息交互频繁。</p>
    
    <p>当前科研项目管理面临的主要问题包括：</p>
    <ul>
        <li>管理流程繁琐，需要在多个系统间频繁切换，效率低下</li>
        <li>信息孤岛严重，各环节数据不能有效共享和流转</li>
        <li>缺乏统一的流程引擎，业务流程调整困难</li>
        <li>权限管理粗放，无法实现页面按钮级的细粒度控制</li>
        <li>缺乏全生命周期的项目跟踪和数据分析能力</li>
        <li>专家评审过程不够透明，缺乏有效的监督机制</li>
    </ul>
    
    <p>为了解决上述问题，建设一套覆盖科研项目全生命周期的管理系统势在必行。系统需要实现科研机构、监测监管部门、专家评审团队之间的高效协同，提供灵活的流程配置能力和细粒度的权限管理功能，全面提升科研项目管理的效率和质量。</p>
    
    <h2>1.2 项目目标</h2>
    <p>本项目旨在建设一套功能完善、性能优越、安全可靠的科研项目全生命周期管理系统，具体目标如下：</p>
    
    <h3>1.2.1 业务目标</h3>
    <ul>
        <li>实现科研项目从需求征集到成果验收的全流程线上管理</li>
        <li>建立科研机构、监管部门、专家团队的协同工作机制</li>
        <li>提供灵活的流程配置能力，支持业务流程的快速调整</li>
        <li>实现页面按钮级的细粒度权限控制，确保数据安全</li>
        <li>提供全面的数据统计分析功能，支撑科学决策</li>
    </ul>
    
    <h3>1.2.2 技术目标</h3>
    <ul>
        <li>采用前后端分离架构，提高系统的可维护性和扩展性</li>
        <li>基于麒麟操作系统和人大金仓数据库，实现国产化技术栈</li>
        <li>系统并发用户数达到1000人以上</li>
        <li>页面响应时间不超过3秒</li>
        <li>系统可用性达到99.9%以上</li>
        <li>支持横向扩展，满足未来业务增长需求</li>
    </ul>
    
    <h3>1.2.3 用户体验目标</h3>
    <ul>
        <li>界面设计简洁美观，符合用户使用习惯</li>
        <li>操作流程清晰明了，减少用户学习成本</li>
        <li>提供智能提示和引导，降低操作失误率</li>
        <li>支持移动端访问，随时随地处理业务</li>
    </ul>
    
    <h2>1.3 项目范围</h2>
    
    <h3>1.3.1 系统边界</h3>
    <p>本系统涵盖科研项目管理的核心业务流程，包括但不限于：</p>
    
    <div class="flowchart">
        <div class="flowchart-step">需求管理</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">项目申报</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">立项评审</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">任务书签订</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">项目实施</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">中期检查 / 年度检查</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">项目验收</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">成果管理</div>
    </div>
    
    <h3>1.3.2 用户角色</h3>
    <p>系统支持以下用户角色：</p>
    
    <table>
        <tr>
            <th>角色类型</th>
            <th>角色说明</th>
            <th>主要职责</th>
        </tr>
        <tr>
            <td>科研机构管理员</td>
            <td>科研单位的系统管理员</td>
            <td>管理本单位用户、查看统计数据、系统配置</td>
        </tr>
        <tr>
            <td>科研人员</td>
            <td>项目申报和实施的主要执行者</td>
            <td>需求征集、项目申报、任务书拆分、项目变更、检查提交、验收申请</td>
        </tr>
        <tr>
            <td>项目负责人</td>
            <td>项目的主要负责人</td>
            <td>项目整体管理、进度把控、团队协调</td>
        </tr>
        <tr>
            <td>监管部门管理员</td>
            <td>监测监管部门的系统管理员</td>
            <td>流程配置、权限管理、系统配置、数据统计</td>
        </tr>
        <tr>
            <td>监管审核员</td>
            <td>负责项目审核的工作人员</td>
            <td>需求审核、申报审核、任务书审核、变更审核、检查审核、验收审核</td>
        </tr>
        <tr>
            <td>评审专家</td>
            <td>参与项目评审的专家</td>
            <td>项目评审、打分、提出评审意见</td>
        </tr>
        <tr>
            <td>专家库管理员</td>
            <td>负责专家信息管理</td>
            <td>专家信息录入、资质审核、专家分配</td>
        </tr>
    </table>
    
    <h3>1.3.3 功能模块</h3>
    <p>系统包含以下主要功能模块：</p>
    
    <table>
        <tr>
            <th>模块名称</th>
            <th>功能说明</th>
            <th>主要用户</th>
        </tr>
        <tr>
            <td>用户认证与授权</td>
            <td>用户登录、注册、密码管理、权限验证</td>
            <td>所有用户</td>
        </tr>
        <tr>
            <td>需求管理</td>
            <td>需求征集、需求审核、需求发布、需求匹配</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>项目申报</td>
            <td>项目申请、申报书填写、附件上传、申报提交</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>立项评审</td>
            <td>专家分配、评审打分、评审意见、评审结果</td>
            <td>监管审核员、评审专家</td>
        </tr>
        <tr>
            <td>任务书管理</td>
            <td>任务拆分、任务书生成、任务书上传、任务书审核</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>项目变更</td>
            <td>变更申请、变更审核、变更记录</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>中期检查</td>
            <td>检查资料提交、检查审核、检查结果反馈</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>年度检查</td>
            <td>年度报告提交、年度审核、年度评价</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>项目验收</td>
            <td>验收申请、验收资料提交、验收审核、验收评审</td>
            <td>科研人员、监管审核员、评审专家</td>
        </tr>
        <tr>
            <td>成果管理</td>
            <td>成果登记、成果审核、成果鉴定、成果共享</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>专家管理</td>
            <td>专家信息管理、专家库维护、专家抽取</td>
            <td>专家库管理员、监管审核员</td>
        </tr>
        <tr>
            <td>流程引擎</td>
            <td>流程配置、流程设计、流程执行、流程监控</td>
            <td>监管部门管理员</td>
        </tr>
        <tr>
            <td>权限管理</td>
            <td>角色管理、用户管理、权限分配、页面按钮级权限</td>
            <td>监管部门管理员</td>
        </tr>
        <tr>
            <td>数据统计</td>
            <td>项目统计、进度统计、成果统计、图表展示</td>
            <td>科研机构管理员、监管部门管理员</td>
        </tr>
    </table>
    
    <h2>1.4 项目约束</h2>
    
    <h3>1.4.1 技术约束</h3>
    <ul>
        <li><strong>操作系统：</strong>必须支持麒麟操作系统（Kylin OS），包括服务器版和桌面版</li>
        <li><strong>数据库：</strong>必须使用人大金仓数据库（KingbaseES）V8或以上版本</li>
        <li><strong>浏览器兼容：</strong>支持Chrome、Firefox、Safari、Edge等主流浏览器，兼容IE11</li>
        <li><strong>前端技术：</strong>基于React生态系统，使用Next.js框架</li>
        <li><strong>后端技术：</strong>基于Spring Boot 3.x，使用Java 17或以上版本</li>
        <li><strong>API规范：</strong>遵循RESTful API设计规范</li>
    </ul>
    
    <h3>1.4.2 性能约束</h3>
    <ul>
        <li>系统响应时间：普通查询不超过2秒，复杂查询不超过5秒</li>
        <li>并发用户数：支持1000个并发用户同时在线</li>
        <li>数据库容量：至少支持百万级项目数据存储</li>
        <li>文件上传：单个文件大小不超过100MB</li>
        <li>系统可用性：≥99.9%</li>
    </ul>
    
    <h3>1.4.3 安全约束</h3>
    <ul>
        <li>必须通过国家信息安全等级保护三级认证</li>
        <li>支持密码复杂度策略和账号锁定机制</li>
        <li>所有数据传输必须使用HTTPS加密</li>
        <li>敏感数据必须加密存储</li>
        <li>完整的操作审计日志</li>
        <li>定期进行安全漏洞扫描和修复</li>
    </ul>
    
    <h3>1.4.4 业务约束</h3>
    <ul>
        <li>遵守国家科研项目管理相关法律法规</li>
        <li>符合科研项目管理流程规范</li>
        <li>保护科研项目数据的机密性</li>
        <li>确保评审过程的公平公正</li>
    </ul>
    
    <h2>1.5 术语定义</h2>
    
    <table>
        <tr>
            <th>术语</th>
            <th>英文</th>
            <th>定义</th>
        </tr>
        <tr>
            <td>科研机构端</td>
            <td>Research Institution Portal</td>
            <td>供科研单位和科研人员使用的系统门户，用于项目申报、管理和实施</td>
        </tr>
        <tr>
            <td>监测监管端</td>
            <td>Supervision Portal</td>
            <td>供监管部门使用的系统门户，用于项目审核、流程配置和系统管理</td>
        </tr>
        <tr>
            <td>专家评审端</td>
            <td>Expert Review Portal</td>
            <td>供评审专家使用的系统门户，用于项目评审和打分</td>
        </tr>
        <tr>
            <td>流程引擎</td>
            <td>Workflow Engine</td>
            <td>用于管理和执行业务流程的核心组件，支持流程的可视化配置</td>
        </tr>
        <tr>
            <td>任务书</td>
            <td>Task Book</td>
            <td>项目立项后签订的正式文件，明确项目目标、任务分解、预算等内容</td>
        </tr>
        <tr>
            <td>中期检查</td>
            <td>Mid-term Review</td>
            <td>在项目实施中期进行的阶段性检查，评估项目进展情况</td>
        </tr>
        <tr>
            <td>年度检查</td>
            <td>Annual Review</td>
            <td>每年度对项目进行的常规检查，了解项目执行情况</td>
        </tr>
        <tr>
            <td>查重率</td>
            <td>Duplicate Rate</td>
            <td>申报书与已有项目的相似度百分比，用于防止重复申报</td>
        </tr>
        <tr>
            <td>麒麟操作系统</td>
            <td>Kylin OS</td>
            <td>国产Linux操作系统，符合国产化要求</td>
        </tr>
        <tr>
            <td>人大金仓数据库</td>
            <td>KingbaseES</td>
            <td>国产关系型数据库管理系统，兼容PostgreSQL</td>
        </tr>
    </table>
    
    <div class="note">
        <strong>说明：</strong>
        <p>本文档中的所有术语均按照上述定义使用。如有特殊说明，会在相应章节中明确标注。</p>
    </div>
</div>

<!-- 第二章 需求分析 -->
<div class="chapter">
    <h1>第二章 需求分析</h1>
    
    <h2>2.1 业务需求分析</h2>
    
    <p>科研项目管理系统需要服务于多个用户群体，每个群体有不同的业务需求和使用场景。本节将详细分析各端的业务需求。</p>
    
    <h3>2.1.1 科研机构端需求</h3>
    
    <p>科研机构端是科研单位和科研人员日常使用的主要入口，其核心需求围绕项目的申报、管理和实施展开。</p>
    
    <h4>2.1.1.1 需求征集场景</h4>
    <p>科研人员需要能够方便地浏览和检索科研需求信息，了解当前的科研热点和方向。系统应提供多维度的需求检索功能，包括按领域、技术方向、预算范围等条件进行筛选。科研人员可以收藏感兴趣的需求，并在合适的时机进行申报响应。</p>
    
    <div class="flowchart">
        <div class="flowchart-step">浏览需求列表</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">按条件筛选需求</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">查看需求详情</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">收藏或申报响应</div>
    </div>
    
    <h4>2.1.1.2 项目申报场景</h4>
    <p>项目申报是科研机构端最核心的业务场景。系统需要提供完整的申报表单，支持项目基本信息填写、研究内容描述、预算编制、人员配置、附件上传等功能。</p>
    
    <table>
        <tr>
            <th>申报环节</th>
            <th>主要内容</th>
            <th>系统支持</th>
        </tr>
        <tr>
            <td>基本信息填写</td>
            <td>项目名称、类型、领域、负责人等</td>
            <td>表单填写、数据校验、自动保存</td>
        </tr>
        <tr>
            <td>研究内容编制</td>
            <td>研究背景、目标、内容、方案等</td>
            <td>富文本编辑、字数统计、模板引用</td>
        </tr>
        <tr>
            <td>预算编制</td>
            <td>经费预算明细表</td>
            <td>预算表格、自动计算、合规检查</td>
        </tr>
        <tr>
            <td>团队配置</td>
            <td>项目成员、分工、简历</td>
            <td>人员选择、角色分配、简历上传</td>
        </tr>
        <tr>
            <td>附件上传</td>
            <td>申报书、承诺书等文件</td>
            <td>文件上传、格式检查、查重检测</td>
        </tr>
        <tr>
            <td>申报提交</td>
            <td>提交审核</td>
            <td>完整性检查、提交确认、状态跟踪</td>
        </tr>
    </table>
    
    <div class="important">
        <strong>重点需求：</strong>
        <p>申报过程中需要支持暂存功能，允许用户分多次完成申报书填写。系统应提供智能提示，告知用户哪些必填项尚未完成。申报书提交前需要进行查重检测，查重率超过阈值的项目将被自动拒绝。</p>
    </div>
    
    <h4>2.1.1.3 任务书管理场景</h4>
    <p>项目立项后，需要完成任务书的签订工作。这是一个复杂的多步骤流程，包括任务拆分、任务书生成、导出、盖章上传、提交审核等环节。</p>
    
    <div class="flowchart">
        <div class="flowchart-step"><strong>步骤1：</strong>任务拆分<br/>将项目分解为多个子任务，明确任务目标、负责人、时间节点</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step"><strong>步骤2：</strong>导出任务书<br/>系统自动生成任务书文档，包含项目和任务信息</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step"><strong>步骤3：</strong>盖章上传<br/>将盖章后的任务书扫描上传到系统</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step"><strong>步骤4：</strong>提交审核<br/>提交至监管部门进行审核</div>
    </div>
    
    <p>任务拆分是任务书管理的核心环节，需要支持以下功能：</p>
    <ul>
        <li>添加、编辑、删除子任务</li>
        <li>设置任务的开始时间和结束时间</li>
        <li>分配任务负责人和参与人员</li>
        <li>设置任务里程碑和交付物</li>
        <li>配置任务间的依赖关系</li>
        <li>可视化展示任务甘特图</li>
    </ul>
    
    <h4>2.1.1.4 项目变更场景</h4>
    <p>项目实施过程中，可能需要对项目内容、预算、人员等进行变更。系统需要提供完整的变更管理流程，确保变更的规范性和可追溯性。</p>
    
    <table>
        <tr>
            <th>变更类型</th>
            <th>变更内容</th>
            <th>审批要求</th>
        </tr>
        <tr>
            <td>内容变更</td>
            <td>研究目标、技术路线、实施方案调整</td>
            <td>需提交变更说明和调整后的方案，经监管部门审核</td>
        </tr>
        <tr>
            <td>预算变更</td>
            <td>预算科目调整、预算金额变化</td>
            <td>需提供详细的预算调整表和变更理由</td>
        </tr>
        <tr>
            <td>人员变更</td>
            <td>项目负责人、主要成员变更</td>
            <td>需提供人员变更申请和新成员资质证明</td>
        </tr>
        <tr>
            <td>时间变更</td>
            <td>项目周期延长或缩短</td>
            <td>需说明原因并提供调整后的进度计划</td>
        </tr>
    </table>
    
    <h4>2.1.1.5 中期/年度检查场景</h4>
    <p>项目执行过程中需要定期接受检查。中期检查通常在项目执行到一半时进行，年度检查则是每年度的常规检查。检查流程包括材料提交、监管审核、结果反馈等环节。</p>
    
    <p>科研人员需要准备以下检查材料：</p>
    <ul>
        <li><strong>项目进展报告：</strong>详细说明项目的执行情况、已完成的工作、取得的成果</li>
        <li><strong>阶段性成果材料：</strong>包括论文、专利、软件著作权等</li>
        <li><strong>经费使用情况：</strong>经费支出明细和相关票据</li>
        <li><strong>下阶段工作计划：</strong>后续工作安排和时间表</li>
        <li><strong>存在问题及改进措施：</strong>项目实施中遇到的问题和解决方案</li>
    </ul>
    
    <div class="note">
        <strong>用户体验要求：</strong>
        <p>系统应在中期检查时间临近时自动提醒科研人员准备材料。材料上传界面应清晰标注每项材料的要求和格式，提供上传进度显示和文件预览功能。</p>
    </div>
    
    <h4>2.1.1.6 项目验收场景</h4>
    <p>项目完成后需要进行验收，这是项目生命周期的最后一个重要环节。验收材料比检查材料更加全面和详细，需要提供项目的完整总结和所有成果证明。</p>
    
    <table>
        <tr>
            <th>验收材料</th>
            <th>内容要求</th>
            <th>格式要求</th>
        </tr>
        <tr>
            <td>项目总结报告</td>
            <td>项目执行情况、目标完成度、创新点、应用前景</td>
            <td>Word或PDF，不少于5000字</td>
        </tr>
        <tr>
            <td>技术报告</td>
            <td>详细的技术方案、实施过程、技术指标达成情况</td>
            <td>Word或PDF，包含必要的图表和数据</td>
        </tr>
        <tr>
            <td>财务决算报告</td>
            <td>项目全周期经费使用情况，支出明细和票据</td>
            <td>Excel表格+扫描件</td>
        </tr>
        <tr>
            <td>成果材料</td>
            <td>论文、专利、软著、产品、标准等成果证明</td>
            <td>PDF扫描件或原件照片</td>
        </tr>
        <tr>
            <td>用户使用报告</td>
            <td>成果应用单位出具的使用证明和效果评价</td>
            <td>加盖单位公章的扫描件</td>
        </tr>
        <tr>
            <td>专家建议名单</td>
            <td>建议的验收评审专家候选人</td>
            <td>在线填写表单</td>
        </tr>
    </table>
    
    <h4>2.1.1.7 成果管理场景</h4>
    <p>项目验收通过后，需要对项目成果进行登记和管理。成果包括论文、专利、软件著作权、产品、标准等多种类型。</p>
    
    <p>成果管理的主要功能需求：</p>
    <ul>
        <li>成果信息录入：标题、类型、时间、作者、单位等</li>
        <li>成果附件上传：证明材料扫描件或电子版</li>
        <li>成果关联项目：将成果与项目建立关联关系</li>
        <li>成果查询统计：按类型、时间、单位等维度统计</li>
        <li>成果共享发布：经审核后的成果可以对外展示</li>
    </ul>
    
    <h3>2.1.2 监测监管端需求</h3>
    
    <p>监测监管端是监管部门开展管理工作的平台，核心功能是对科研项目进行全过程监督和管理。</p>
    
    <h4>2.1.2.1 需求管理场景</h4>
    <p>监管部门需要管理科研需求的全生命周期，包括需求征集、需求审核、需求发布、需求匹配等环节。</p>
    
    <div class="flowchart">
        <div class="flowchart-step">需求征集<br/>收集各单位提出的科研需求</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">需求审核<br/>审核需求的合理性和可行性</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">需求发布<br/>将审核通过的需求向社会发布</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">需求匹配<br/>将需求与项目申报进行匹配</div>
    </div>
    
    <p>需求审核是关键环节，审核员需要查看需求的详细信息，包括：</p>
    <ul>
        <li>需求提出单位的基本信息和联系方式</li>
        <li>需求的所属领域和技术方向</li>
        <li>需求的详细描述和技术指标</li>
        <li>预期的研发投入和攻关类型</li>
        <li>需求的紧迫程度和预期完成时间</li>
    </ul>
    
    <p>审核员可以选择通过或不通过，需要填写审核意见。对于不通过的需求，系统会通知需求提出单位，并允许其修改后重新提交。</p>
    
    <h4>2.1.2.2 申报管理场景</h4>
    <p>申报管理是监管端的核心工作，涉及申报的接收、形式审查、查重检测、专家分配、评审组织等多个环节。</p>
    
    <table>
        <tr>
            <th>管理环节</th>
            <th>主要工作</th>
            <th>系统功能</th>
        </tr>
        <tr>
            <td>申报接收</td>
            <td>接收科研单位提交的项目申报</td>
            <td>申报列表展示、状态筛选、快速检索</td>
        </tr>
        <tr>
            <td>形式审查</td>
            <td>检查申报材料的完整性和规范性</td>
            <td>材料清单核对、格式校验、退回修改</td>
        </tr>
        <tr>
            <td>查重检测</td>
            <td>检测申报内容与已有项目的重复度</td>
            <td>自动查重、查重报告生成、相似度分析</td>
        </tr>
        <tr>
            <td>专家分配</td>
            <td>为项目分配合适的评审专家</td>
            <td>专家库检索、自动匹配、回避规则、专家抽取</td>
        </tr>
        <tr>
            <td>评审组织</td>
            <td>组织专家进行项目评审</td>
            <td>评审任务分配、评审进度跟踪、评审结果汇总</td>
        </tr>
        <tr>
            <td>立项决策</td>
            <td>根据评审结果决定是否立项</td>
            <td>评审分数查看、综合评价、立项审批</td>
        </tr>
    </table>
    
    <div class="important">
        <strong>查重功能详解：</strong>
        <p>查重是防止重复申报的重要手段。系统应提供智能查重功能，将申报书与数据库中的所有项目进行比对，计算相似度。查重报告应清晰展示：</p>
        <ul>
            <li>总体相似度百分比</li>
            <li>相似片段列表，按相似度从高到低排序</li>
            <li>每个相似片段的来源项目信息</li>
            <li>相似内容的对比视图，支持高亮显示</li>
        </ul>
        <p>查重阈值可以在系统配置中设定，通常设为80%。超过阈值的申报将被自动标记为高风险，需要人工审核。</p>
    </div>
    
    <h4>2.1.2.3 任务书审核场景</h4>
    <p>科研单位提交任务书后，监管部门需要进行审核。审核内容包括：</p>
    
    <ul>
        <li><strong>项目信息一致性：</strong>核对任务书中的项目信息与立项批复是否一致</li>
        <li><strong>任务拆分合理性：</strong>检查任务分解是否科学合理，是否覆盖项目目标</li>
        <li><strong>时间安排可行性：</strong>评估任务时间节点设置是否合理</li>
        <li><strong>人员配置合理性：</strong>检查负责人和参与人员是否与申报一致</li>
        <li><strong>中期检查配置：</strong>确认是否需要中期检查和年度检查，以及检查时间</li>
    </ul>
    
    <p>审核页面应提供以下功能：</p>
    <ul>
        <li>项目基本信息展示（只读）</li>
        <li>已签订任务书文档预览和下载</li>
        <li>任务拆分列表展示，包含任务详情</li>
        <li>中期检查和年度检查配置（可编辑）</li>
        <li>审核通过和不通过按钮，不通过需填写原因</li>
    </ul>
    
    <h4>2.1.2.4 变更审核场景</h4>
    <p>项目变更申请提交后，监管部门需要评估变更的必要性和合理性。审核界面应对比变更前后的内容，方便审核员快速了解变更点。</p>
    
    <table>
        <tr>
            <th>变更类型</th>
            <th>审核要点</th>
            <th>审批流程</th>
        </tr>
        <tr>
            <td>内容变更</td>
            <td>变更是否偏离原定目标、是否影响项目价值</td>
            <td>重大变更需报上级审批</td>
        </tr>
        <tr>
            <td>预算变更</td>
            <td>预算调整是否合规、调整幅度是否合理</td>
            <td>超过10%需专门审批</td>
        </tr>
        <tr>
            <td>人员变更</td>
            <td>新负责人资质、团队稳定性影响</td>
            <td>负责人变更需严格审核</td>
        </tr>
        <tr>
            <td>时间变更</td>
            <td>延期理由充分性、对后续工作影响</td>
            <td>一般可直接批准</td>
        </tr>
    </table>
    
    <h4>2.1.2.5 检查审核场景</h4>
    <p>中期检查和年度检查的审核流程类似，主要关注项目的执行情况和阶段性成果。审核界面需要展示：</p>
    
    <ul>
        <li>项目基本信息和立项时的目标任务</li>
        <li>本阶段的计划任务和实际完成情况</li>
        <li>科研人员提交的检查材料和附件</li>
        <li>经费使用情况和预算执行率</li>
        <li>阶段性成果列表和证明材料</li>
    </ul>
    
    <p>审核员需要给出检查结论，通常分为：</p>
    <ul>
        <li><strong>通过：</strong>项目执行良好，按计划推进</li>
        <li><strong>通过（有问题）：</strong>项目基本符合要求，但存在一些需要改进的问题</li>
        <li><strong>未通过：</strong>项目执行严重滞后或偏离目标，需要整改</li>
    </ul>
    
    <h4>2.1.2.6 验收审核场景</h4>
    <p>项目验收是项目管理的最后一关，审核更加严格和全面。验收审核包括材料审核和专家评审两个阶段。</p>
    
    <div class="flowchart">
        <div class="flowchart-step">材料初审<br/>检查验收材料的完整性和规范性</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">专家分配<br/>根据项目领域分配评审专家</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">专家评审<br/>专家审阅材料并给出评审意见</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">综合评价<br/>汇总专家意见，形成验收结论</div>
    </div>
    
    <h4>2.1.2.7 流程配置场景</h4>
    <p>流程配置是监管端的高级功能，允许管理员自定义业务流程。这是一个可视化的流程设计器，支持拖拽式操作。</p>
    
    <p>流程配置的核心功能：</p>
    <ul>
        <li><strong>节点管理：</strong>添加、删除、编辑流程节点，支持开始节点、审核节点、条件节点、结束节点等类型</li>
        <li><strong>连线配置：</strong>通过拖拽连接节点，定义流程的流转路径</li>
        <li><strong>权限配置：</strong>为每个节点配置可执行角色和可见权限</li>
        <li><strong>按钮配置：</strong>为每个节点配置操作按钮，如通过、拒绝、退回等</li>
        <li><strong>条件设置：</strong>为条件节点设置判断条件，如查重率、评分等</li>
        <li><strong>通知配置：</strong>为节点配置消息通知和邮件提醒</li>
        <li><strong>流程测试：</strong>提供流程模拟功能，验证流程配置的正确性</li>
    </ul>
    
    <div class="note">
        <strong>可视化流程设计器：</strong>
        <p>流程设计器采用画布式布局，左侧是节点工具栏，中间是画布区域，右侧是属性配置面板。用户可以从工具栏拖拽节点到画布，通过点击节点激活连线模式，然后点击目标节点完成连接。双击节点可以打开属性配置面板，配置节点的详细信息。</p>
    </div>
    
    <h4>2.1.2.8 权限管理场景</h4>
    <p>权限管理实现页面按钮级的细粒度控制。管理员可以为不同角色配置不同的权限，包括菜单访问权限和页面按钮操作权限。</p>
    
    <table>
        <tr>
            <th>权限类型</th>
            <th>说明</th>
            <th>配置方式</th>
        </tr>
        <tr>
            <td>菜单权限</td>
            <td>控制用户可以访问哪些菜单和页面</td>
            <td>树形菜单结构，勾选授权</td>
        </tr>
        <tr>
            <td>按钮权限</td>
            <td>控制用户在页面上可以执行哪些操作</td>
            <td>按钮列表，逐个授权</td>
        </tr>
        <tr>
            <td>数据权限</td>
            <td>控制用户可以查看和操作哪些数据范围</td>
            <td>设置数据过滤规则</td>
        </tr>
        <tr>
            <td>字段权限</td>
            <td>控制用户可以查看和编辑哪些字段</td>
            <td>字段列表，设置可见/可编辑</td>
        </tr>
    </table>
    
    <p>权限配置界面的设计要求：</p>
    <ul>
        <li>左侧显示角色列表，支持新增、编辑、删除角色</li>
        <li>中间显示功能模块和页面树形结构</li>
        <li>右侧显示当前页面的按钮列表</li>
        <li>勾选复选框即可授予权限，支持批量操作</li>
        <li>提供权限预览功能，模拟该角色登录后的界面</li>
    </ul>
    
    <h3>2.1.3 专家评审端需求</h3>
    
    <p>专家评审端供评审专家使用，主要功能是参与项目评审，查看评审任务和历史记录。</p>
    
    <h4>2.1.3.1 评审任务场景</h4>
    <p>专家登录系统后，可以看到分配给自己的评审任务列表。任务列表应显示项目名称、申报单位、评审类型、截止时间等信息。</p>
    
    <p>评审任务的状态包括：</p>
    <ul>
        <li><strong>待评审：</strong>新分配的任务，尚未开始评审</li>
        <li><strong>评审中：</strong>已开始评审，但尚未提交</li>
        <li><strong>已完成：</strong>已提交评审意见</li>
        <li><strong>已超期：</strong>超过截止时间仍未完成</li>
    </ul>
    
    <h4>2.1.3.2 在线评审场景</h4>
    <p>点击评审任务后进入评审页面。评审页面应展示项目的详细信息和申报材料，专家可以在线查阅所有附件。</p>
    
    <p>评审表单通常包括以下内容：</p>
    <ul>
        <li><strong>创新性评价：</strong>评估项目的创新程度和技术先进性（满分20分）</li>
        <li><strong>可行性评价：</strong>评估项目实施方案的可行性（满分20分）</li>
        <li><strong>必要性评价：</strong>评估项目的应用价值和必要性（满分20分）</li>
        <li><strong>团队能力评价：</strong>评估项目团队的研究能力（满分20分）</li>
        <li><strong>预算合理性评价：</strong>评估项目预算的合理性（满分20分）</li>
        <li><strong>综合评分：</strong>系统自动计算总分（满分100分）</li>
        <li><strong>评审意见：</strong>专家给出文字意见和建议（500-1000字）</li>
        <li><strong>评审结论：</strong>建议立项/不建议立项/建议修改后立项</li>
    </ul>
    
    <div class="warning">
        <strong>评审纪律：</strong>
        <p>专家在评审过程中需遵守评审纪律，不得泄露项目信息，不得与申报单位私下接触。系统应记录专家的所有操作行为，包括查看材料的时间、修改评分的次数等，以便事后审计。</p>
    </div>
    
    <h4>2.1.3.3 评审历史场景</h4>
    <p>专家可以查看自己历史评审过的项目列表，了解项目的最终结果。这有助于专家总结经验，提高评审水平。</p>
    
    <p>评审历史界面应展示：</p>
    <ul>
        <li>项目基本信息和申报单位</li>
        <li>自己给出的评分和意见</li>
        <li>其他专家的平均分（不显示具体专家）</li>
        <li>项目的最终立项结果</li>
        <li>项目的后续执行情况（如已验收）</li>
    </ul>
    
    <h2>2.2 功能需求分析</h2>
    
    <p>基于业务需求分析，本节详细说明系统的功能需求，包括功能模块划分、功能点描述、用例图等。</p>
    
    <h3>2.2.1 需求管理功能</h3>
    
    <h4>2.2.1.1 功能概述</h4>
    <p>需求管理模块用于管理科研需求的全生命周期，包括需求征集、需求审核、需求发布、需求检索等功能。</p>
    
    <h4>2.2.1.2 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>REQ-001</td>
            <td>需求征集</td>
            <td>收集各单位提出的科研需求，填写需求表单并提交</td>
            <td>科研人员、科研机构管理员</td>
        </tr>
        <tr>
            <td>REQ-002</td>
            <td>需求列表</td>
            <td>查看已发布的科研需求列表，支持筛选和检索</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>REQ-003</td>
            <td>需求详情</td>
            <td>查看需求的详细信息，包括技术指标、预算等</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>REQ-004</td>
            <td>需求收藏</td>
            <td>收藏感兴趣的需求，方便后续查看</td>
            <td>科研人员</td>
        </tr>
        <tr>
            <td>REQ-005</td>
            <td>需求审核</td>
            <td>审核提交的需求，判断通过或不通过</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>REQ-006</td>
            <td>需求发布</td>
            <td>将审核通过的需求向社会发布</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>REQ-007</td>
            <td>需求匹配</td>
            <td>将需求与项目申报进行匹配分析</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>REQ-008</td>
            <td>需求统计</td>
            <td>统计需求的数量、状态、领域分布等</td>
            <td>监管部门管理员</td>
        </tr>
    </table>
    
    <h4>2.2.1.3 详细用例</h4>
    <p><strong>用例名称：</strong>需求审核</p>
    <p><strong>参与者：</strong>监管审核员</p>
    <p><strong>前置条件：</strong>科研单位已提交需求申请</p>
    <p><strong>后置条件：</strong>需求状态更新为"审核通过"或"审核不通过"</p>
    
    <p><strong>基本流程：</strong></p>
    <ol>
        <li>监管审核员登录系统</li>
        <li>进入需求管理页面</li>
        <li>筛选出"待审核"状态的需求</li>
        <li>点击某个需求的"审核"按钮</li>
        <li>系统显示需求详情页面</li>
        <li>审核员查看需求提出单位信息</li>
        <li>审核员查看需求项体信息，包括名称、领域、技术方向、预期水平等</li>
        <li>审核员查看需求的五个详细问题回答</li>
        <li>审核员做出审核决定，选择"审核通过"或"审核不通过"</li>
        <li>如果不通过，需填写不通过原因</li>
        <li>点击提交按钮</li>
        <li>系统更新需求状态</li>
        <li>系统发送通知给需求提出单位</li>
    </ol>
    
    <p><strong>扩展流程：</strong></p>
    <ul>
        <li>如果审核员认为需求信息不清楚，可以退回修改，需求状态变为"待修改"</li>
        <li>如果需求涉及敏感领域，审核员可以标记为"需上级审批"，转交上级领导审批</li>
    </ul>
    
    <h3>2.2.2 项目申报功能</h3>
    
    <h4>2.2.2.1 功能概述</h4>
    <p>项目申报模块是科研人员申请科研项目的入口，提供完整的申报表单和附件上传功能。申报过程支持暂存和查重检测。</p>
    
    <h4>2.2.2.2 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>APP-001</td>
            <td>申报入口</td>
            <td>选择申报类型和对应的需求，进入申报页面</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-002</td>
            <td>基本信息填写</td>
            <td>填写项目名称、类型、领域、负责人等基本信息</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-003</td>
            <td>研究内容编制</td>
            <td>填写研究背景、目标、内容、方案等，支持富文本编辑</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-004</td>
            <td>预算编制</td>
            <td>填写经费预算明细表，系统自动计算总额</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-005</td>
            <td>团队配置</td>
            <td>添加项目成员，分配角色，上传简历</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-006</td>
            <td>附件上传</td>
            <td>上传申报书、承诺书等文件，支持多种格式</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-007</td>
            <td>申报暂存</td>
            <td>保存当前填写内容，允许后续继续编辑</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-008</td>
            <td>申报提交</td>
            <td>提交申报书，系统进行完整性检查和查重检测</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-009</td>
            <td>申报查询</td>
            <td>查看已提交的申报，了解审核进度</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>APP-010</td>
            <td>申报修改</td>
            <td>对审核不通过的申报进行修改后重新提交</td>
            <td>科研人员、项目负责人</td>
        </tr>
    </table>
    
    <div class="note">
        <strong>申报表单设计原则：</strong>
        <p>申报表单应采用分步骤或分标签页的方式组织，避免单个页面过长。每一步完成后自动保存，防止数据丢失。必填项应有明显标识，未填写完整时给出提示。支持从模板导入，减少重复劳动。</p>
    </div>
    
    <h4>2.2.2.3 查重功能详细设计</h4>
    <p>查重功能是防止重复申报的关键机制。系统应在申报提交时自动触发查重检测，将申报书内容与数据库中的所有项目进行比对。</p>
    
    <p><strong>查重算法：</strong></p>
    <ul>
        <li>采用文本相似度算法，如余弦相似度或编辑距离</li>
        <li>对申报书的研究内容部分进行分词和向量化</li>
        <li>计算与数据库中每个项目的相似度</li>
        <li>找出相似度超过阈值的项目，生成查重报告</li>
    </ul>
    
    <p><strong>查重报告内容：</strong></p>
    <ul>
        <li>总体相似度：与最相似项目的相似度百分比</li>
        <li>相似片段列表：列出所有相似度超过50%的片段</li>
        <li>来源项目信息：相似内容来自哪个项目</li>
        <li>对比视图：左右对照显示相似内容，高亮标注重复部分</li>
    </ul>
    
    <p><strong>查重结果处理：</strong></p>
    <ul>
        <li>相似度小于50%：绿色等级，通过检测</li>
        <li>相似度50%-80%：黄色等级，需人工审核</li>
        <li>相似度大于80%：红色等级，自动拒绝</li>
    </ul>
    
    <h3>2.2.3 任务书管理功能</h3>
    
    <h4>2.2.3.1 功能概述</h4>
    <p>任务书管理模块用于项目立项后的任务拆分和任务书签订。这是一个分步骤的流程，包括任务拆分、任务书导出、盖章上传、提交审核四个步骤。</p>
    
    <h4>2.2.4.2 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>TASK-001</td>
            <td>任务书列表</td>
            <td>查看项目的任务书状态，包括待签订、已签订等</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-002</td>
            <td>任务拆分</td>
            <td>将项目分解为多个子任务，设置任务目标、负责人、时间节点</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-003</td>
            <td>任务编辑</td>
            <td>修改任务的详细信息，包括名称、描述、时间、人员等</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-004</td>
            <td>任务删除</td>
            <td>删除不需要的子任务</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-005</td>
            <td>任务书生成</td>
            <td>根据项目信息和任务拆分自动生成任务书文档</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-006</td>
            <td>任务书导出</td>
            <td>导出任务书为Word或PDF格式，供盖章使用</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-007</td>
            <td>任务书上传</td>
            <td>上传盖章后的任务书扫描件</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-008</td>
            <td>任务书提交</td>
            <td>提交任务书至监管部门进行审核</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>TASK-009</td>
            <td>任务书审核</td>
            <td>审核科研单位提交的任务书，配置中期检查时间</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>TASK-010</td>
            <td>任务书详情</td>
            <td>查看任务书的详细信息和签订文档</td>
            <td>所有用户</td>
        </tr>
    </table>
    
    <h4>2.2.3.3 分步骤流程设计</h4>
    <p>任务拆分页面采用步骤向导的形式，清晰展示当前所在步骤和完成进度。</p>
    
    <div class="flowchart">
        <div class="flowchart-step" style="background: #667eea; color: white;">
            <strong>步骤1：拆分任务书</strong><br/>
            将项目分解为多个子任务<br/>
            设置任务名称、类型、负责人、时间等信息<br/>
            支持添加、编辑、删除任务
        </div>
        <div class="flowchart-arrow">↓ 点击"下一步"</div>
        <div class="flowchart-step" style="background: #667eea; color: white;">
            <strong>步骤2：导出任务书</strong><br/>
            系统自动生成任务书文档<br/>
            提供Word和PDF两种格式下载<br/>
            用户下载后打印并盖章
        </div>
        <div class="flowchart-arrow">↓ 点击"下一步"</div>
        <div class="flowchart-step" style="background: #667eea; color: white;">
            <strong>步骤3：上传已盖章任务书</strong><br/>
            上传盖章后的任务书扫描件<br/>
            支持jpg/png/pdf格式<br/>
            文件大小不超过20MB
        </div>
        <div class="flowchart-arrow">↓ 点击"下一步"</div>
        <div class="flowchart-step" style="background: #667eea; color: white;">
            <strong>步骤4：提交审核</strong><br/>
            确认所有信息无误<br/>
            提交至监管部门审核<br/>
            等待审核结果
        </div>
    </div>
    
    <p><strong>步骤验证规则：</strong></p>
    <ul>
        <li>步骤1：必须至少添加一个子任务才能进入下一步</li>
        <li>步骤2：必须点击过下载按钮才能进入下一步</li>
        <li>步骤3：必须上传盖章文档才能进入下一步</li>
        <li>步骤4：可以返回前面步骤修改，但修改后需重新走完流程</li>
    </ul>
    
    <h3>2.2.4 项目变更功能</h3>
    
    <p>项目变更功能用于处理项目实施过程中的各类变更申请。变更类型包括内容变更、预算变更、人员变更、时间变更等。</p>
    
    <h4>2.2.4.1 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>CHG-001</td>
            <td>变更申请</td>
            <td>提交项目变更申请，填写变更内容和理由</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>CHG-002</td>
            <td>变更列表</td>
            <td>查看项目的所有变更记录</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>CHG-003</td>
            <td>变更详情</td>
            <td>查看变更的详细信息，包括变更前后对比</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>CHG-004</td>
            <td>变更审核</td>
            <td>审核变更申请，给出审核意见</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>CHG-005</td>
            <td>变更统计</td>
            <td>统计项目的变更次数和变更类型分布</td>
            <td>监管部门管理员</td>
        </tr>
    </table>
    
    <h3>2.2.5 中期检查功能</h3>
    
    <p>中期检查功能用于项目执行到一半时的阶段性检查。科研人员提交检查材料，监管部门进行审核评价。</p>
    
    <h4>2.2.5.1 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>MID-001</td>
            <td>检查列表</td>
            <td>查看需要进行中期检查的项目列表</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>MID-002</td>
            <td>提交材料</td>
            <td>上传中期检查所需的各项材料和附件</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>MID-003</td>
            <td>提交审批</td>
            <td>提交检查材料至监管部门审核</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>MID-004</td>
            <td>检查审核</td>
            <td>审核检查材料，给出检查结论和意见</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>MID-005</td>
            <td>审批进度</td>
            <td>查看检查材料的审批流程和当前状态</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>MID-006</td>
            <td>检查详情</td>
            <td>查看检查的详细信息和审核结果</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>MID-007</td>
            <td>审批历史</td>
            <td>查看检查的完整审批流程记录</td>
            <td>科研人员、监管审核员</td>
        </tr>
    </table>
    
    <h3>2.2.6 年度检查功能</h3>
    
    <p>年度检查功能与中期检查类似，用于每年度的常规检查。功能设计与中期检查保持一致。</p>
    
    <h4>2.2.6.1 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>ANN-001</td>
            <td>检查列表</td>
            <td>查看需要进行年度检查的项目列表</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>ANN-002</td>
            <td>提交材料</td>
            <td>上传年度检查所需的各项材料和附件</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>ANN-003</td>
            <td>提交审批</td>
            <td>提交检查材料至监管部门审核</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>ANN-004</td>
            <td>检查审核</td>
            <td>审核检查材料，给出检查结论和意见</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>ANN-005</td>
            <td>审批进度</td>
            <td>查看检查材料的审批流程和当前状态</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>ANN-006</td>
            <td>检查详情</td>
            <td>查看检查的详细信息和审核结果</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>ANN-007</td>
            <td>审批历史</td>
            <td>查看检查的完整审批流程记录</td>
            <td>科研人员、监管审核员</td>
        </tr>
    </table>
    
    <h3>2.2.7 项目验收功能</h3>
    
    <p>项目验收是项目管理的最后环节，包括验收申请、材料提交、专家评审、综合评价等步骤。</p>
    
    <h4>2.2.7.1 功能列表</h4>
    <table>
        <tr>
            <th>功能编号</th>
            <th>功能名称</th>
            <th>功能描述</th>
            <th>用户角色</th>
        </tr>
        <tr>
            <td>ACC-001</td>
            <td>验收列表</td>
            <td>查看项目的验收状态和任务列表</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>ACC-002</td>
            <td>验收申请</td>
            <td>提交项目验收申请，填写基本信息</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>ACC-003</td>
            <td>材料上传</td>
            <td>上传验收所需的各类材料和附件</td>
            <td>科研人员、项目负责人</td>
        </tr>
        <tr>
            <td>ACC-004</td>
            <td>材料审核</td>
            <td>对验收材料进行形式审查</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>ACC-005</td>
            <td>专家分配</td>
            <td>为验收项目分配评审专家</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>ACC-006</td>
            <td>专家评审</td>
            <td>专家查阅材料并给出评审意见</td>
            <td>评审专家</td>
        </tr>
        <tr>
            <td>ACC-007</td>
            <td>验收结论</td>
            <td>综合专家意见，形成验收结论</td>
            <td>监管审核员</td>
        </tr>
        <tr>
            <td>ACC-008</td>
            <td>验收详情</td>
            <td>查看验收的详细信息和结果</td>
            <td>科研人员、监管审核员</td>
        </tr>
        <tr>
            <td>ACC-009</td>
            <td>成果管理</td>
            <td>验收通过后进入成果管理流程</td>
            <td>科研人员、监管审核员</td>
        </tr>
    </table>
    
    <p style="page-break-after: always;"></p>
    
    <h2>2.3 非功能需求分析</h2>
    
    <p>非功能需求描述系统在性能、安全、可用性、兼容性等方面的要求。这些需求虽然不直接体现为功能，但对系统的成功至关重要。</p>
    
    <h3>2.3.1 性能需求</h3>
    
    <h4>2.3.1.1 响应时间要求</h4>
    <table>
        <tr>
            <th>操作类型</th>
            <th>响应时间要求</th>
            <th>说明</th>
        </tr>
        <tr>
            <td>页面加载</td>
            <td>≤ 2秒</td>
            <td>普通页面在正常网络条件下的首屏加载时间</td>
        </tr>
        <tr>
            <td>数据查询</td>
            <td>≤ 3秒</td>
            <td>简单查询和列表展示的响应时间</td>
        </tr>
        <tr>
            <td>复杂查询</td>
            <td>≤ 5秒</td>
            <td>涉及多表关联或大数据量的查询</td>
        </tr>
        <tr>
            <td>数据提交</td>
            <td>≤ 3秒</td>
            <td>表单提交和数据保存操作</td>
        </tr>
        <tr>
            <td>文件上传</td>
            <td>根据文件大小</td>
            <td>上传速度应≥500KB/s</td>
        </tr>
        <tr>
            <td>文件下载</td>
            <td>根据文件大小</td>
            <td>下载速度应≥1MB/s</td>
        </tr>
        <tr>
            <td>报表生成</td>
            <td>≤ 10秒</td>
            <td>复杂统计报表的生成时间</td>
        </tr>
    </table>
    
    <h4>2.3.1.2 并发性能要求</h4>
    <ul>
        <li><strong>并发用户数：</strong>系统应支持1000个用户同时在线，其中200个用户同时进行操作</li>
        <li><strong>峰值处理能力：</strong>在申报截止日等高峰期，应支持2000个并发用户</li>
        <li><strong>事务处理能力：</strong>系统应支持每秒处理100个事务（TPS ≥ 100）</li>
        <li><strong>数据库连接数：</strong>数据库连接池应配置50-200个连接</li>
    </ul>
    
    <h4>2.3.1.3 数据容量要求</h4>
    <table>
        <tr>
            <th>数据类型</th>
            <th>容量要求</th>
            <th>增长预期</th>
        </tr>
        <tr>
            <td>用户数据</td>
            <td>≥ 10,000条记录</td>
            <td>每年增长1000条</td>
        </tr>
        <tr>
            <td>项目数据</td>
            <td>≥ 1,000,000条记录</td>
            <td>每年增长5000条</td>
        </tr>
        <tr>
            <td>文件存储</td>
            <td>≥ 10TB</td>
            <td>每年增长2TB</td>
        </tr>
        <tr>
            <td>日志数据</td>
            <td>≥ 5,000,000条记录</td>
            <td>每月增长100,000条</td>
        </tr>
    </table>
    
    <h3>2.3.2 安全需求</h3>
    
    <h4>2.3.2.1 身份认证要求</h4>
    <ul>
        <li>采用用户名+密码的方式进行身份认证</li>
        <li>密码长度≥8位，必须包含大小写字母、数字和特殊字符</li>
        <li>密码错误次数超过5次后锁定账号30分钟</li>
        <li>密码有效期为90天，到期强制修改</li>
        <li>支持短信验证码二次验证（可选）</li>
        <li>支持单点登录(SSO)集成</li>
    </ul>
    
    <h4>2.3.2.2 权限控制要求</h4>
    <ul>
        <li>实现基于角色的访问控制(RBAC)</li>
        <li>支持菜单级权限控制</li>
        <li>支持页面按钮级权限控制</li>
        <li>支持数据级权限控制（如只能查看本单位数据）</li>
        <li>支持字段级权限控制（如敏感字段脱敏显示）</li>
    </ul>
    
    <h4>2.3.2.3 数据安全要求</h4>
    <ul>
        <li>所有数据传输采用HTTPS加密</li>
        <li>敏感数据（如密码、身份证号）采用不可逆加密存储</li>
        <li>数据库连接采用加密通道</li>
        <li>定期进行数据备份，备份文件加密存储</li>
        <li>文件上传进行病毒扫描</li>
        <li>防止SQL注入、XSS攻击等常见安全威胁</li>
    </ul>
    
    <h4>2.3.2.4 审计要求</h4>
    <ul>
        <li>记录所有用户的登录日志，包括时间、IP地址、浏览器等信息</li>
        <li>记录所有关键操作日志，包括新增、修改、删除等</li>
        <li>日志内容应包括操作人、操作时间、操作内容、操作结果</li>
        <li>日志数据至少保留1年</li>
        <li>提供日志查询和导出功能</li>
    </ul>
    
    <h3>2.3.3 可用性需求</h3>
    
    <h4>2.3.3.1 系统可用性</h4>
    <ul>
        <li>系统年可用率≥99.9%（允许年停机时间≤8.76小时）</li>
        <li>计划内维护应安排在非工作时间进行</li>
        <li>故障恢复时间≤30分钟</li>
        <li>数据恢复时间≤2小时</li>
    </ul>
    
    <h4>2.3.3.2 用户体验要求</h4>
    <ul>
        <li>界面设计应简洁美观，符合用户使用习惯</li>
        <li>关键操作应提供明确的提示和反馈</li>
        <li>错误信息应友好清晰，指导用户如何解决问题</li>
        <li>支持快捷键操作，提高操作效率</li>
        <li>提供在线帮助文档和操作视频</li>
    </ul>
    
    <h4>2.3.3.3 易用性要求</h4>
    <ul>
        <li>新用户无需培训即可完成基本操作</li>
        <li>表单填写提供智能提示和自动完成</li>
        <li>复杂流程提供向导式引导</li>
        <li>支持批量操作，减少重复工作</li>
        <li>支持数据导入导出，方便数据迁移</li>
    </ul>
    
    <h3>2.3.4 兼容性需求</h3>
    
    <h4>2.3.4.1 浏览器兼容性</h4>
    <table>
        <tr>
            <th>浏览器</th>
            <th>版本要求</th>
            <th>支持程度</th>
        </tr>
        <tr>
            <td>Chrome</td>
            <td>≥ 90</td>
            <td>完全支持</td>
        </tr>
        <tr>
            <td>Firefox</td>
            <td>≥ 88</td>
            <td>完全支持</td>
        </tr>
        <tr>
            <td>Safari</td>
            <td>≥ 14</td>
            <td>完全支持</td>
        </tr>
        <tr>
            <td>Edge</td>
            <td>≥ 90</td>
            <td>完全支持</td>
        </tr>
        <tr>
            <td>IE11</td>
            <td>11.0</td>
            <td>基本支持</td>
        </tr>
    </table>
    
    <h4>2.3.4.2 操作系统兼容性</h4>
    <ul>
        <li><strong>服务器端：</strong>麒麟操作系统V10（必须），CentOS 7/8（可选）</li>
        <li><strong>客户端：</strong>Windows 7/10/11、麒麟操作系统桌面版、macOS</li>
    </ul>
    
    <h4>2.3.4.3 设备兼容性</h4>
    <ul>
        <li>支持PC端访问，屏幕分辨率≥1366x768</li>
        <li>支持平板电脑访问</li>
        <li>支持手机浏览器访问（响应式布局）</li>
    </ul>
    
    <h4>2.3.4.4 数据库兼容性</h4>
    <ul>
        <li><strong>首选：</strong>人大金仓数据库KingbaseES V8或以上版本</li>
        <li><strong>兼容：</strong>PostgreSQL 12或以上版本（开发测试用）</li>
    </ul>
</div>

<!-- 由于篇幅限制，这里只展示了前两章的部分内容。完整文档应包含所有12章和附录的详细内容。-->

<!-- 第三章 系统架构设计（示例部分）-->
<div class="chapter">
    <h1>第三章 系统架构设计</h1>
    
    <h2>3.1 总体架构设计</h2>
    
    <p>科研项目管理系统采用前后端分离的架构设计，前端使用Next.js框架构建，后端使用Spring Boot框架构建。系统分为表现层、业务逻辑层、数据访问层和数据存储层四个层次。</p>
    
    <div class="figure">
        <pre style="text-align: center; font-size: 11pt; line-height: 1.5;">
┌─────────────────────────────────────────────────────────────┐
│                        用户访问层                            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  │ PC浏览器     │  │ 平板浏览器    │  │ 手机浏览器    │      │
│  └──────────────┘  └──────────────┘  └──────────────┘      │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        前端应用层                            │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Next.js Application (React 19)          │   │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐          │   │
│  │  │科研机构端 │  │监测监管端 │  │专家评审端 │          │   │
│  │  └──────────┘  └──────────┘  └──────────┘          │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓ RESTful API
┌─────────────────────────────────────────────────────────────┐
│                        API网关层                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Nginx + API Gateway                     │   │
│  │         路由转发  |  负载均衡  |  限流熔断             │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        后端应用层                            │
│  ┌─────────────────────────────────────────────────────┐   │
│  │           Spring Boot 3.2 + Spring Cloud            │   │
│  │  ┌──────────────────────────────────────────────┐   │   │
│  │  │           业务服务模块                        │   │   │
│  │  │  • 用户认证服务  • 需求管理服务              │   │   │
│  │  │  • 项目管理服务  • 评审管理服务              │   │   │
│  │  │  • 成果管理服务  • 流程引擎服务              │   │   │
│  │  │  • 权限管理服务  • 文件管理服务              │   │   │
│  │  └──────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        中间件层                              │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │  Redis   │  │ RabbitMQ │  │   MinIO  │  │Elasticsearch│  │
│  │  缓存     │  │ 消息队列  │  │ 文件存储  │  │  全文检索  │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        数据存储层                            │
│  ┌──────────────────────────────────────────────────────┐  │
│  │          人大金仓数据库 KingbaseES V8                 │  │
│  │     主库(Master)  |  从库(Slave)  |  备份库(Backup)   │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
        </pre>
        <div class="figure-caption">图3-1 系统总体架构图</div>
    </div>
    
    <h3>3.1.1 架构分层说明</h3>
    
    <h4>用户访问层</h4>
    <p>用户访问层是用户与系统交互的入口，支持多种设备和浏览器访问。用户通过浏览器访问系统，获取前端页面和资源。</p>
    
    <h4>前端应用层</h4>
    <p>前端应用层基于Next.js框架开发，采用React 19作为UI库。前端应用分为三个子门户：科研机构端、监测监管端、专家评审端。每个门户有独立的路由和页面，但共享通用组件库。</p>
    
    <p>前端技术栈：</p>
    <ul>
        <li><strong>框架：</strong>Next.js 16 (App Router)</li>
        <li><strong>UI库：</strong>React 19.2</li>
        <li><strong>UI组件：</strong>shadcn/ui + Radix UI</li>
        <li><strong>样式：</strong>Tailwind CSS v4</li>
        <li><strong>状态管理：</strong>React Hooks + SWR</li>
        <li><strong>表单处理：</strong>React Hook Form</li>
        <li><strong>数据请求：</strong>Fetch API + SWR</li>
        <li><strong>图表：</strong>Recharts</li>
    </ul>
    
    <h4>API网关层</h4>
    <p>API网关层负责前后端通信的路由转发、负载均衡、限流熔断等功能。使用Nginx作为反向代理服务器，提供统一的API入口。</p>
    
    <p>网关功能：</p>
    <ul>
        <li>路由转发：根据URL路径将请求转发到不同的后端服务</li>
        <li>负载均衡：在多个后端实例间分配请求负载</li>
        <li>限流熔断：防止系统过载，保护后端服务</li>
        <li>统一认证：验证JWT Token，拒绝未授权请求</li>
        <li>日志记录：记录所有API调用日志</li>
        <li>CORS处理：处理跨域请求</li>
    </ul>
    
    <h4>后端应用层</h4>
    <p>后端应用层基于Spring Boot框架开发，采用微服务架构设计。每个业务模块独立部署，通过RESTful API对外提供服务。</p>
    
    <p>后端技术栈：</p>
    <ul>
        <li><strong>框架：</strong>Spring Boot 3.2</li>
        <li><strong>ORM：</strong>MyBatis Plus 3.5</li>
        <li><strong>安全：</strong>Spring Security + JWT</li>
        <li><strong>文档：</strong>Knife4j (Swagger)</li>
        <li><strong>工具：</strong>Lombok, Hutool</li>
        <li><strong>监控：</strong>Spring Boot Actuator</li>
    </ul>
    
    <h4>中间件层</h4>
    <p>中间件层提供缓存、消息队列、文件存储、全文检索等基础服务，提升系统性能和可扩展性。</p>
    
    <table>
        <tr>
            <th>中间件</th>
            <th>用途</th>
            <th>典型场景</th>
        </tr>
        <tr>
            <td>Redis</td>
            <td>缓存、Session存储</td>
            <td>用户会话、热点数据缓存、分布式锁</td>
        </tr>
        <tr>
            <td>RabbitMQ</td>
            <td>消息队列</td>
            <td>异步任务、流程通知、邮件发送</td>
        </tr>
        <tr>
            <td>MinIO</td>
            <td>文件存储</td>
            <td>附件上传、文档存储、图片存储</td>
        </tr>
        <tr>
            <td>Elasticsearch</td>
            <td>全文检索</td>
            <td>项目搜索、专家检索、日志查询</td>
        </tr>
    </table>
    
    <h4>数据存储层</h4>
    <p>数据存储层使用人大金仓数据库KingbaseES作为主要数据库，采用主从复制架构，提供高可用性和数据安全性。</p>
    
    <p>数据库架构：</p>
    <ul>
        <li><strong>主库（Master）：</strong>处理所有写操作和实时读操作</li>
        <li><strong>从库（Slave）：</strong>处理查询操作，减轻主库压力</li>
        <li><strong>备份库（Backup）：</strong>定期备份数据，用于灾难恢复</li>
    </ul>
    
    <h2>3.2 技术架构设计</h2>
    
    <h3>3.2.1 前端技术架构</h3>
    
    <p>前端采用Next.js App Router架构，支持服务端渲染(SSR)和静态生成(SSG)，提供更好的SEO和首屏加载性能。</p>
    
    <h4>目录结构</h4>
    <pre>
project-root/
├── app/                          # Next.js App Router目录
│   ├── dashboard/                # 科研机构端
│   │   ├── projects/             # 项目管理
│   │   │   ├── apply/            # 项目申报
│   │   │   ├── task/             # 任务书管理
│   │   │   ├── midterm/          # 中期检查
│   │   │   ├── annual/           # 年度检查
│   │   │   └── acceptance/       # 项目验收
│   │   ├── demands/              # 需求征集
│   │   ├── my-projects/          # 我的项目
│   │   └── layout.tsx            # 科研端布局
│   ├── supervisor/               # 监测监管端
│   │   ├── application/          # 申报管理
│   │   ├── demand/               # 需求管理
│   │   ├── task/                 # 任务书审核
│   │   ├── config/               # 配置管理
│   │   │   ├── workflow/         # 流程配置
│   │   │   └── permissions/      # 权限管理
│   │   └── layout.tsx            # 监管端布局
│   ├── expert/                   # 专家评审端
│   │   ├── review/               # 评审任务
│   │   └── history/              # 评审历史
│   ├── login/                    # 登录页
│   ├── layout.tsx                # 根布局
│   └── page.tsx                  # 首页
├── components/                   # 组件目录
│   ├── layout/                   # 布局组件
│   │   ├── sidebar.tsx           # 侧边栏
│   │   ├── header.tsx            # 顶部导航
│   │   └── footer.tsx            # 页脚
│   ├── shared/                   # 共享组件
│   │   ├── data-table.tsx        # 数据表格
│   │   ├── file-upload.tsx       # 文件上传
│   │   └── form-builder.tsx      # 表单构建器
│   └── ui/                       # UI组件库
│       ├── button.tsx            # 按钮
│       ├── input.tsx             # 输入框
│       ├── dialog.tsx            # 对话框
│       └── ...                   # 其他组件
├── lib/                          # 工具库
│   ├── api.ts                    # API请求封装
│   ├── auth.ts                   # 认证工具
│   ├── utils.ts                  # 通用工具
│   └── workflow-engine.ts        # 流程引擎
├── styles/                       # 样式文件
│   └── globals.css               # 全局样式
└── public/                       # 静态资源
    ├── images/                   # 图片
    └── docs/                     # 文档
    </pre>
    
    <h4>组件设计原则</h4>
    <ul>
        <li><strong>单一职责：</strong>每个组件只负责一个功能</li>
        <li><strong>可复用性：</strong>通用组件抽取到shared目录</li>
        <li><strong>Props类型：</strong>使用TypeScript定义Props类型</li>
        <li><strong>状态管理：</strong>优先使用React Hooks，复杂状态使用SWR</li>
        <li><strong>性能优化：</strong>使用React.memo避免不必要的重渲染</li>
        <li><strong>错误处理：</strong>使用Error Boundary捕获组件错误</li>
    </ul>
    
    <h3>3.2.2 后端技术架构</h3>
    
    <p>后端采用Spring Boot微服务架构，每个业务模块独立部署，通过RESTful API通信。</p>
    
    <h4>项目结构</h4>
    <pre>
backend/
├── src/main/java/com/research/project/
│   ├── ProjectManagementApplication.java    # 启动类
│   ├── common/                              # 公共模块
│   │   ├── Result.java                      # 统一返回结果
│   │   ├── PageResult.java                  # 分页结果
│   │   ├── exception/                       # 异常处理
│   │   │   ├── BusinessException.java       # 业务异常
│   │   │   └── GlobalExceptionHandler.java  # 全局异常处理器
│   │   └── constant/                        # 常量定义
│   ├── config/                              # 配置类
│   │   ├── SecurityConfig.java              # 安全配置
│   │   ├── MyBatisPlusConfig.java           # MyBatis配置
│   │   ├── RedisConfig.java                 # Redis配置
│   │   ├── CorsConfig.java                  # 跨域配置
│   │   └── SwaggerConfig.java               # Swagger配置
│   ├── entity/                              # 实体类
│   │   ├── User.java                        # 用户实体
│   │   ├── Project.java                     # 项目实体
│   │   ├── Demand.java                      # 需求实体
│   │   └── ...                              # 其他实体
│   ├── mapper/                              # 数据访问层
│   │   ├── UserMapper.java                  # 用户Mapper
│   │   ├── ProjectMapper.java               # 项目Mapper
│   │   └── ...                              # 其他Mapper
│   ├── service/                             # 业务逻辑层
│   │   ├── UserService.java                 # 用户服务接口
│   │   ├── ProjectService.java              # 项目服务接口
│   │   └── impl/                            # 服务实现
│   │       ├── UserServiceImpl.java         # 用户服务实现
│   │       ├── ProjectServiceImpl.java      # 项目服务实现
│   │       └── ...                          # 其他服务实现
│   ├── controller/                          # 控制器层
│   │   ├── UserController.java              # 用户控制器
│   │   ├── ProjectController.java           # 项目控制器
│   │   ├── DemandController.java            # 需求控制器
│   │   └── ...                              # 其他控制器
│   ├── dto/                                 # 数据传输对象
│   │   ├── request/                         # 请求DTO
│   │   └── response/                        # 响应DTO
│   ├── security/                            # 安全模块
│   │   ├── JwtTokenProvider.java            # JWT工具类
│   │   ├── JwtAuthenticationFilter.java     # JWT过滤器
│   │   └── UserDetailsServiceImpl.java      # 用户详情服务
│   └── workflow/                            # 流程引擎
│       ├── WorkflowEngine.java              # 流程引擎核心
│       ├── WorkflowNode.java                # 流程节点
│       └── WorkflowInstance.java            # 流程实例
├── src/main/resources/
│   ├── application.yml                      # 应用配置
│   ├── application-dev.yml                  # 开发环境配置
│   ├── application-prod.yml                 # 生产环境配置
│   └── mapper/                              # MyBatis XML
│       ├── UserMapper.xml                   # 用户Mapper XML
│       └── ...                              # 其他Mapper XML
└── pom.xml                                  # Maven配置
    </pre>
    
    <h4>分层架构说明</h4>
    <table>
        <tr>
            <th>层次</th>
            <th>职责</th>
            <th>技术</th>
        </tr>
        <tr>
            <td>Controller层</td>
            <td>接收HTTP请求，参数校验，调用Service，返回结果</td>
            <td>Spring MVC, Validation</td>
        </tr>
        <tr>
            <td>Service层</td>
            <td>业务逻辑处理，事务控制，调用Mapper</td>
            <td>Spring Service, @Transactional</td>
        </tr>
        <tr>
            <td>Mapper层</td>
            <td>数据库操作，SQL执行</td>
            <td>MyBatis Plus</td>
        </tr>
        <tr>
            <td>Entity层</td>
            <td>数据库表映射，实体定义</td>
            <td>JPA注解, Lombok</td>
        </tr>
    </table>
    
    <h3>3.2.3 数据库架构</h3>
    
    <p>数据库采用人大金仓KingbaseES，兼容PostgreSQL语法。数据库设计遵循第三范式，合理使用索引提升查询性能。</p>
    
    <h4>数据库连接配置</h4>
    <pre>
# application.yml
spring:
  datasource:
    driver-class-name: com.kingbase8.Driver
    url: jdbc:kingbase8://localhost:54321/research_db
    username: system
    password: ${DB_PASSWORD}
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
    </pre>
    
    <div class="important">
        <strong>人大金仓数据库适配说明：</strong>
        <p>人大金仓数据库KingbaseES高度兼容PostgreSQL，但在使用时需要注意以下几点：</p>
        <ul>
            <li>驱动类名使用 com.kingbase8.Driver</li>
            <li>JDBC URL格式为 jdbc:kingbase8://host:port/database</li>
            <li>默认端口为54321（PostgreSQL为5432）</li>
            <li>支持PostgreSQL的大部分SQL语法和函数</li>
            <li>序列(Sequence)的使用方式与PostgreSQL相同</li>
            <li>建议使用MyBatis Plus的KingbaseES方言</li>
        </ul>
    </div>
    
    <h2>3.3 部署架构设计</h2>
    
    <p>系统采用分布式部署架构，前后端分离部署，支持横向扩展。部署在麒麟操作系统上，确保国产化要求。</p>
    
    <div class="figure">
        <pre style="text-align: center; font-size: 10pt; line-height: 1.4;">
                        ┌─────────────────┐
                        │   用户浏览器     │
                        └────────┬────────┘
                                 │ HTTPS
                                 ↓
                    ┌────────────────────────┐
                    │   Nginx (负载均衡)      │
                    │   麒麟操作系统 V10      │
                    └───────┬────────────────┘
                            │
            ┌───────────────┼───────────────┐
            │               │               │
            ↓               ↓               ↓
    ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
    │ Next.js 前端  │ │ Next.js 前端  │ │ Next.js 前端  │
    │   实例 1      │ │   实例 2      │ │   实例 3      │
    │ 麒麟 OS V10   │ │ 麒麟 OS V10   │ │ 麒麟 OS V10   │
    └──────────────┘ └──────────────┘ └──────────────┘
            │               │               │
            └───────────────┼───────────────┘
                            │ API调用
                            ↓
                    ┌──────────────────┐
                    │  API Gateway     │
                    │  Nginx           │
                    └────────┬─────────┘
                             │
            ┌────────────────┼────────────────┐
            │                │                │
            ↓                ↓                ↓
    ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
    │ Spring Boot  │ │ Spring Boot  │ │ Spring Boot  │
    │   实例 1      │ │   实例 2      │ │   实例 3      │
    │ 麒麟 OS V10   │ │ 麒麟 OS V10   │ │ 麒麟 OS V10   │
    └──────┬───────┘ └──────┬───────┘ └──────┬───────┘
           │                │                │
           └────────────────┼────────────────┘
                            │
        ┌───────────────────┼───────────────────┐
        │                   │                   │
        ↓                   ↓                   ↓
┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│    Redis     │    │   RabbitMQ   │    │    MinIO     │
│  缓存集群     │    │   消息队列    │    │  文件存储     │
│ 麒麟 OS V10   │    │ 麒麟 OS V10   │    │ 麒麟 OS V10   │
└──────────────┘    └──────────────┘    └──────────────┘
        │
        ↓
┌─────────────────────────────────────────────┐
│         人大金仓数据库集群                    │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │ 主库      │  │ 从库      │  │ 备份库    │  │
│  │ Master   │→ │ Slave    │  │ Backup   │  │
│  └──────────┘  └──────────┘  └──────────┘  │
│            麒麟操作系统 V10                   │
└─────────────────────────────────────────────┘
        </pre>
        <div class="figure-caption">图3-2 系统部署架构图</div>
    </div>
    
    <h3>3.3.1 服务器配置建议</h3>
    
    <table>
        <tr>
            <th>服务器类型</th>
            <th>配置要求</th>
            <th>数量</th>
            <th>说明</th>
        </tr>
        <tr>
            <td>前端应用服务器</td>
            <td>8核CPU, 16GB内存, 200GB硬盘</td>
            <td>3台</td>
            <td>部署Next.js应用，负载均衡</td>
        </tr>
        <tr>
            <td>后端应用服务器</td>
            <td>16核CPU, 32GB内存, 500GB硬盘</td>
            <td>3台</td>
            <td>部署Spring Boot应用，负载均衡</td>
        </tr>
        <tr>
            <td>数据库服务器</td>
            <td>32核CPU, 128GB内存, 2TB SSD</td>
            <td>3台</td>
            <td>主从备架构，高可用</td>
        </tr>
        <tr>
            <td>Redis服务器</td>
            <td>8核CPU, 32GB内存, 500GB硬盘</td>
            <td>3台</td>
            <td>Redis集群，哨兵模式</td>
        </tr>
        <tr>
            <td>文件存储服务器</td>
            <td>8核CPU, 16GB内存, 10TB硬盘</td>
            <td>3台</td>
            <td>MinIO集群，分布式存储</td>
        </tr>
        <tr>
            <td>负载均衡服务器</td>
            <td>8核CPU, 16GB内存, 200GB硬盘</td>
            <td>2台</td>
            <td>Nginx，主备模式</td>
        </tr>
    </table>
    
    <div class="note">
        <strong>麒麟操作系统版本选择：</strong>
        <p>建议使用麒麟操作系统V10服务器版，该版本经过充分测试，稳定性好，兼容性强。支持主流的Java、Node.js等运行环境，满足系统部署需求。</p>
    </div>
    
    <h2>3.4 网络架构设计</h2>
    
    <p>系统采用三层网络架构：接入层、应用层、数据层。通过防火墙和安全组实现网络隔离和访问控制。</p>
    
    <div class="figure">
        <pre style="text-align: center; font-size: 10pt; line-height: 1.4;">
┌─────────────────────────────────────────────────────────┐
│                      互联网                              │
└────────────────────┬────────────────────────────────────┘
                     │
                     ↓
        ┌────────────────────────┐
        │      防火墙/WAF         │
        │   (Web应用防火墙)       │
        └────────────┬───────────┘
                     │
                     ↓
┌────────────────────────────────────────────────────────┐
│                   接入层 (DMZ区)                        │
│  ┌──────────────┐          ┌──────────────┐           │
│  │ Nginx主节点   │          │ Nginx备节点   │           │
│  │ 负载均衡      │ ←─────→  │ 负载均衡      │           │
│  └──────────────┘          └──────────────┘           │
└────────────────────┬───────────────────────────────────┘
                     │
                     ↓
┌────────────────────────────────────────────────────────┐
│                   应用层 (内网)                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
│  │前端服务器1│  │前端服务器2│  │前端服务器3│            │
│  └──────────┘  └──────────┘  └──────────┘            │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
│  │后端服务器1│  │后端服务器2│  │后端服务器3│            │
│  └──────────┘  └──────────┘  └──────────┘            │
└────────────────────┬───────────────────────────────────┘
                     │
                     ↓
┌────────────────────────────────────────────────────────┐
│                   数据层 (核心内网)                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
│  │数据库主库 │→ │数据库从库 │  │数据库备库 │            │
│  └──────────┘  └──────────┘  └──────────┘            │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐            │
│  │Redis集群 │  │RabbitMQ  │  │MinIO存储 │            │
│  └──────────┘  └──────────┘  └──────────┘            │
└────────────────────────────────────────────────────────┘
        </pre>
        <div class="figure-caption">图3-3 系统网络架构图</div>
    </div>
    
    <h3>3.4.1 网络安全策略</h3>
    
    <table>
        <tr>
            <th>网络层</th>
            <th>访问控制</th>
            <th>安全措施</th>
        </tr>
        <tr>
            <td>接入层</td>
            <td>允许80/443端口访问</td>
            <td>WAF防护、DDoS防护、SSL证书</td>
        </tr>
        <tr>
            <td>应用层</td>
            <td>仅允许接入层访问</td>
            <td>内网隔离、安全组、访问日志</td>
        </tr>
        <tr>
            <td>数据层</td>
            <td>仅允许应用层访问</td>
            <td>数据库防火墙、加密传输、审计日志</td>
        </tr>
    </table>
    
    <h2>3.5 安全架构设计</h2>
    
    <p>系统安全架构涵盖身份认证、权限控制、数据加密、审计日志等多个方面，确保系统的安全性和合规性。</p>
    
    <h3>3.5.1 身份认证机制</h3>
    
    <p>系统采用JWT（JSON Web Token）进行身份认证，支持单点登录和会话管理。</p>
    
    <div class="flowchart">
        <div class="flowchart-step">用户输入用户名和密码</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">后端验证用户凭证</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">生成JWT Token（包含用户ID、角色、权限等信息）</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">返回Token给前端，前端存储在LocalStorage</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">后续请求在Header中携带Token</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">后端验证Token有效性和权限</div>
        <div class="flowchart-arrow">↓</div>
        <div class="flowchart-step">执行业务逻辑并返回结果</div>
    </div>
    
    <h3>3.5.2 权限控制模型</h3>
    
    <p>系统采用RBAC（基于角色的访问控制）模型，实现细粒度的权限管理。</p>
    
    <div class="figure">
        <pre style="text-align: center; font-size: 11pt; line-height: 1.5;">
┌──────────┐      ┌──────────┐      ┌──────────┐      ┌──────────┐
│   用户    │ ───→ │   角色    │ ───→ │   权限    │ ───→ │   资源    │
│  User    │      │   Role   │      │Permission│      │ Resource │
└──────────┘      └──────────┘      └──────────┘      └──────────┘
     │                  │                  │                  │
     │                  │                  │                  │
  张三、李四         科研人员          项目申报权限         申报页面
  王五、赵六         监管审核员        项目审核权限         审核页面
  专家A、专家B       评审专家          项目评审权限         评审页面
        </pre>
        <div class="figure-caption">图3-4 RBAC权限模型</div>
    </div>
    
    <p>权限控制包含四个层级：</p>
    <ul>
        <li><strong>菜单权限：</strong>控制用户可以访问哪些菜单和页面</li>
        <li><strong>按钮权限：</strong>控制用户在页面上可以执行哪些操作</li>
        <li><strong>数据权限：</strong>控制用户可以查看和操作哪些数据</li>
        <li><strong>字段权限：</strong>控制用户可以查看和编辑哪些字段</li>
    </ul>
    
    <div class="warning">
        <strong>安全提示：</strong>
        <p>权限验证必须在后端进行，前端的权限控制只是为了优化用户体验。所有API接口都必须进行权限验证，防止越权访问。</p>
    </div>
</div>

<!-- 继续后续章节... -->

<div class="chapter">
    <h1>第四章 数据库设计</h1>
    
    <h2>4.1 数据库选型</h2>
    
    <p>根据项目需求和国产化要求，系统选用人大金仓数据库KingbaseES作为主要数据库管理系统。</p>
    
    <h3>4.1.1 选型理由</h3>
    
    <table>
        <tr>
            <th>评估维度</th>
            <th>人大金仓KingbaseES</th>
            <th>优势说明</th>
        </tr>
        <tr>
            <td>国产化</td>
            <td>✓ 完全自主知识产权</td>
            <td>符合国产化替代要求，安全可控</td>
        </tr>
        <tr>
            <td>兼容性</td>
            <td>✓ 高度兼容PostgreSQL</td>
            <td>开发成本低，生态丰富</td>
        </tr>
        <tr>
            <td>性能</td>
            <td>✓ 支持高并发、大数据量</td>
            <td>满足系统性能要求</td>
        </tr>
        <tr>
            <td>稳定性</td>
            <td>✓ 经过大量项目验证</td>
            <td>可靠性高，故障率低</td>
        </tr>
        <tr>
            <td>功能</td>
            <td>✓ 支持事务、存储过程、触发器</td>
            <td>功能完善，满足业务需求</td>
        </tr>
        <tr>
            <td>安全</td>
            <td>✓ 支持加密、审计、备份</td>
            <td>安全机制完善</td>
        </tr>
        <tr>
            <td>支持</td>
            <td>✓ 提供专业技术支持</td>
            <td>有问题可及时解决</td>
        </tr>
    </table>
    
    <h3>4.1.2 版本要求</h3>
    <ul>
        <li><strong>推荐版本：</strong>KingbaseES V8 R6或以上版本</li>
        <li><strong>操作系统：</strong>麒麟操作系统V10服务器版</li>
        <li><strong>字符集：</strong>UTF-8</li>
        <li><strong>排序规则：</strong>zh_CN.UTF-8</li>
    </ul>
    
    <h2>4.2 数据库架构</h2>
    
    <p>数据库采用主从复制架构，提供高可用性和读写分离能力。</p>
    
    <h3>4.2.1 主从复制架构</h3>
    
    <div class="figure">
        <pre style="text-align: center; font-size: 11pt; line-height: 1.5;">
                    ┌─────────────────┐
                    │   应用服务器     │
                    └────────┬────────┘
                             │
                ┌────────────┼────────────┐
                │            │            │
            写操作          读操作        读操作
                │            │            │
                ↓            ↓            ↓
        ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
        │  主库(Master) │→│  从库(Slave1)│  │  从库(Slave2)│
        │  读写         │ │  只读         │  │  只读         │
        │  192.168.1.10│ │ 192.168.1.11 │  │ 192.168.1.12 │
        └──────┬───────┘ └──────────────┘  └──────────────┘
               │              ↑                    ↑
               │              │                    │
               └──────────────┴────────────────────┘
                        流复制(Streaming Replication)
        </pre>
        <div class="figure-caption">图4-1 数据库主从架构图</div>
    </div>
    
    <h3>4.2.2 读写分离策略</h3>
    <ul>
        <li><strong>写操作：</strong>所有INSERT、UPDATE、DELETE操作路由到主库</li>
        <li><strong>读操作：</strong>SELECT操作路由到从库，负载均衡</li>
        <li><strong>实时读：</strong>需要实时数据的查询路由到主库</li>
        <li><strong>故障切换：</strong>主库故障时，自动提升从库为主库</li>
    </ul>
    
    <h2>4.3 表结构设计</h2>
    
    <p>数据库共设计32张表，涵盖用户权限、需求管理、项目管理、评审管理、成果管理、流程引擎等模块。</p>
    
    <h3>4.3.1 用户权限表</h3>
    
    <h4>用户表 (sys_user)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>长度</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>用户ID</td>
            <td>主键，自增</td>
        </tr>
        <tr>
            <td>username</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>用户名</td>
            <td>唯一，非空</td>
        </tr>
        <tr>
            <td>password</td>
            <td>VARCHAR</td>
            <td>255</td>
            <td>密码（加密）</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>real_name</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>真实姓名</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>id_card</td>
            <td>VARCHAR</td>
            <td>18</td>
            <td>身份证号</td>
            <td>唯一</td>
        </tr>
        <tr>
            <td>phone</td>
            <td>VARCHAR</td>
            <td>11</td>
            <td>手机号</td>
            <td>唯一</td>
        </tr>
        <tr>
            <td>email</td>
            <td>VARCHAR</td>
            <td>100</td>
            <td>邮箱</td>
            <td>-</td>
        </tr>
        <tr>
            <td>org_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>所属机构ID</td>
            <td>外键</td>
        </tr>
        <tr>
            <td>user_type</td>
            <td>VARCHAR</td>
            <td>20</td>
            <td>用户类型</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>status</td>
            <td>SMALLINT</td>
            <td>-</td>
            <td>状态(0禁用1启用)</td>
            <td>默认1</td>
        </tr>
        <tr>
            <td>create_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>创建时间</td>
            <td>默认当前时间</td>
        </tr>
        <tr>
            <td>update_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>更新时间</td>
            <td>-</td>
        </tr>
    </table>
    
    <h4>角色表 (sys_role)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>长度</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>角色ID</td>
            <td>主键，自增</td>
        </tr>
        <tr>
            <td>role_name</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>角色名称</td>
            <td>唯一，非空</td>
        </tr>
        <tr>
            <td>role_code</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>角色编码</td>
            <td>唯一，非空</td>
        </tr>
        <tr>
            <td>description</td>
            <td>VARCHAR</td>
            <td>200</td>
            <td>角色描述</td>
            <td>-</td>
        </tr>
        <tr>
            <td>status</td>
            <td>SMALLINT</td>
            <td>-</td>
            <td>状态</td>
            <td>默认1</td>
        </tr>
        <tr>
            <td>create_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>创建时间</td>
            <td>默认当前时间</td>
        </tr>
    </table>
    
    <h4>用户角色关联表 (sys_user_role)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>user_id</td>
            <td>BIGINT</td>
            <td>用户ID</td>
            <td>外键，联合主键</td>
        </tr>
        <tr>
            <td>role_id</td>
            <td>BIGINT</td>
            <td>角色ID</td>
            <td>外键，联合主键</td>
        </tr>
    </table>
    
    <h4>权限表 (sys_permission)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>长度</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>权限ID</td>
            <td>主键，自增</td>
        </tr>
        <tr>
            <td>parent_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>父权限ID</td>
            <td>默认0</td>
        </tr>
        <tr>
            <td>permission_name</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>权限名称</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>permission_code</td>
            <td>VARCHAR</td>
            <td>100</td>
            <td>权限编码</td>
            <td>唯一，非空</td>
        </tr>
        <tr>
            <td>permission_type</td>
            <td>VARCHAR</td>
            <td>20</td>
            <td>权限类型(menu/button)</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>url</td>
            <td>VARCHAR</td>
            <td>200</td>
            <td>菜单URL</td>
            <td>-</td>
        </tr>
        <tr>
            <td>icon</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>图标</td>
            <td>-</td>
        </tr>
        <tr>
            <td>sort_order</td>
            <td>INT</td>
            <td>-</td>
            <td>排序</td>
            <td>默认0</td>
        </tr>
    </table>
    
    <h4>角色权限关联表 (sys_role_permission)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>role_id</td>
            <td>BIGINT</td>
            <td>角色ID</td>
            <td>外键，联合主键</td>
        </tr>
        <tr>
            <td>permission_id</td>
            <td>BIGINT</td>
            <td>权限ID</td>
            <td>外键，联合主键</td>
        </tr>
    </table>
    
    <h3>4.3.2 需求管理表</h3>
    
    <h4>需求表 (demand)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>长度</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>需求ID</td>
            <td>主键，自增</td>
        </tr>
        <tr>
            <td>demand_name</td>
            <td>VARCHAR</td>
            <td>200</td>
            <td>需求名称</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>demand_code</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>需求编号</td>
            <td>唯一</td>
        </tr>
        <tr>
            <td>org_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>提出单位ID</td>
            <td>外键</td>
        </tr>
        <tr>
            <td>contact_person</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>联系人</td>
            <td>-</td>
        </tr>
        <tr>
            <td>contact_phone</td>
            <td>VARCHAR</td>
            <td>20</td>
            <td>联系电话</td>
            <td>-</td>
        </tr>
        <tr>
            <td>field</td>
            <td>VARCHAR</td>
            <td>100</td>
            <td>所属领域</td>
            <td>-</td>
        </tr>
        <tr>
            <td>tech_direction</td>
            <td>VARCHAR</td>
            <td>100</td>
            <td>技术方向</td>
            <td>-</td>
        </tr>
        <tr>
            <td>expected_level</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>预期水平</td>
            <td>-</td>
        </tr>
        <tr>
            <td>attack_type</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>攻关类型</td>
            <td>-</td>
        </tr>
        <tr>
            <td>investment</td>
            <td>DECIMAL</td>
            <td>15,2</td>
            <td>预期投入(万元)</td>
            <td>-</td>
        </tr>
        <tr>
            <td>description1</td>
            <td>TEXT</td>
            <td>-</td>
            <td>研究背景和目的</td>
            <td>-</td>
        </tr>
        <tr>
            <td>description2</td>
            <td>TEXT</td>
            <td>-</td>
            <td>关键技术问题</td>
            <td>-</td>
        </tr>
        <tr>
            <td>description3</td>
            <td>TEXT</td>
            <td>-</td>
            <td>预期成果及水平</td>
            <td>-</td>
        </tr>
        <tr>
            <td>description4</td>
            <td>TEXT</td>
            <td>-</td>
            <td>预期效益</td>
            <td>-</td>
        </tr>
        <tr>
            <td>description5</td>
            <td>TEXT</td>
            <td>-</td>
            <td>技术指标对标分析</td>
            <td>-</td>
        </tr>
        <tr>
            <td>status</td>
            <td>VARCHAR</td>
            <td>20</td>
            <td>审核状态</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>submit_user_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>提交人ID</td>
            <td>外键</td>
        </tr>
        <tr>
            <td>submit_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>提交时间</td>
            <td>-</td>
        </tr>
        <tr>
            <td>review_user_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>审核人ID</td>
            <td>外键</td>
        </tr>
        <tr>
            <td>review_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>审核时间</td>
            <td>-</td>
        </tr>
        <tr>
            <td>review_comment</td>
            <td>TEXT</td>
            <td>-</td>
            <td>审核意见</td>
            <td>-</td>
        </tr>
        <tr>
            <td>create_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>创建时间</td>
            <td>默认当前时间</td>
        </tr>
    </table>
    
    <div class="note">
        <strong>说明：</strong>
        <p>需求表的五个description字段对应需求征集表单中的五个详细问题。这种设计便于后续扩展和维护。</p>
    </div>
    
    <h3>4.3.3 项目管理表</h3>
    
    <h4>项目表 (project)</h4>
    <table>
        <tr>
            <th>字段名</th>
            <th>类型</th>
            <th>长度</th>
            <th>说明</th>
            <th>约束</th>
        </tr>
        <tr>
            <td>id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>项目ID</td>
            <td>主键，自增</td>
        </tr>
        <tr>
            <td>project_code</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>项目编号</td>
            <td>唯一，非空</td>
        </tr>
        <tr>
            <td>project_name</td>
            <td>VARCHAR</td>
            <td>200</td>
            <td>项目名称</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>project_type</td>
            <td>VARCHAR</td>
            <td>50</td>
            <td>项目类型</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>field</td>
            <td>VARCHAR</td>
            <td>100</td>
            <td>所属领域</td>
            <td>-</td>
        </tr>
        <tr>
            <td>leader_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>项目负责人ID</td>
            <td>外键</td>
        </tr>
        <tr>
            <td>org_id</td>
            <td>BIGINT</td>
            <td>-</td>
            <td>承担单位ID</td>
            <td>外键</td>
        </tr>
        <tr>
            <td>start_date</td>
            <td>DATE</td>
            <td>-</td>
            <td>开始日期</td>
            <td>-</td>
        </tr>
        <tr>
            <td>end_date</td>
            <td>DATE</td>
            <td>-</td>
            <td>结束日期</td>
            <td>-</td>
        </tr>
        <tr>
            <td>total_budget</td>
            <td>DECIMAL</td>
            <td>15,2</td>
            <td>项目总预算(万元)</td>
            <td>-</td>
        </tr>
        <tr>
            <td>apply_budget</td>
            <td>DECIMAL</td>
            <td>15,2</td>
            <td>申请专项经费(万元)</td>
            <td>-</td>
        </tr>
        <tr>
            <td>self_budget</td>
            <td>DECIMAL</td>
            <td>15,2</td>
            <td>自筹/其他资金(万元)</td>
            <td>-</td>
        </tr>
        <tr>
            <td>research_content</td>
            <td>TEXT</td>
            <td>-</td>
            <td>研究内容</td>
            <td>-</td>
        </tr>
        <tr>
            <td>research_goal</td>
            <td>TEXT</td>
            <td>-</td>
            <td>研究目标</td>
            <td>-</td>
        </tr>
        <tr>
            <td>status</td>
            <td>VARCHAR</td>
            <td>20</td>
            <td>项目状态</td>
            <td>非空</td>
        </tr>
        <tr>
            <td>apply_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>申报时间</td>
            <td>-</td>
        </tr>
        <tr>
            <td>approve_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>立项时间</td>
            <td>-</td>
        </tr>
        <tr>
            <td>create_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>创建时间</td>
            <td>默认当前时间</td>
        </tr>
        <tr>
            <td>update_time</td>
            <td>TIMESTAMP</td>
            <td>-</td>
            <td>更新时间</td>
            <td>-</td>
        </tr>
    </table>
    
    <p style="page-break-after: always;"></p>
    
    <div class="important">
        <strong>重要提示：</strong>
        <p>由于篇幅限制，本文档仅展示了部分章节的详细内容。完整的700页设计文档应包含以下所有内容：</p>
        <ul>
            <li>所有32张数据库表的完整设计（包括索引、约束、触发器）</li>
            <li>所有功能模块的详细设计（包括流程图、时序图、类图）</li>
            <li>所有API接口的详细说明（包括请求参数、响应格式、错误码）</li>
            <li>所有页面的原型设计（包括截图、交互说明、字段说明）</li>
            <li>完整的部署手册（包括环境配置、安装步骤、配置文件）</li>
            <li>完整的测试方案（包括测试用例、测试数据、测试报告模板）</li>
            <li>完整的运维方案（包括监控配置、备份策略、故障处理流程）</li>
            <li>详细的数据字典（所有表、字段、枚举值的说明）</li>
            <li>完整的API接口清单（所有接口的URL、方法、参数）</li>
            <li>所有配置文件示例（Nginx、Spring Boot、数据库等）</li>
        </ul>
        <p>建议根据实际项目需求，补充完善各章节内容，确保文档的完整性和实用性。</p>
    </div>
</div>

<!-- 文档结束标记 -->
<div style="text-align: center; margin-top: 100px; padding: 50px; border-top: 3px solid #667eea;">
    <h2 style="color: #667eea; font-size: 24pt;">文档结束</h2>
    <p style="font-size: 14pt; margin-top: 20px;">科研项目管理系统详细设计方案</p>
    <p style="font-size: 12pt; color: #666;">版本：V2.0 | 日期：2025年1月</p>
</div>

</body>
</html>
