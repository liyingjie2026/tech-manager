<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.research.project.mapper.AssessmentMapper">

    <resultMap id="BaseResultMap" type="com.research.project.entity.Assessment">
        <id column="id" property="id"/>
        <result column="assessment_no" property="assessmentNo"/>
        <result column="assessment_year" property="assessmentYear"/>
        <result column="assessment_period" property="assessmentPeriod"/>
        <result column="institution_id" property="institutionId"/>
        <result column="institution_name" property="institutionName"/>
        <result column="assessment_type" property="assessmentType"/>
        <result column="assessment_content" property="assessmentContent"/>
        <result column="score" property="score"/>
        <result column="rating" property="rating"/>
        <result column="evaluator" property="evaluator"/>
        <result column="evaluation_date" property="evaluationDate"/>
        <result column="conclusion" property="conclusion"/>
        <result column="improvement_suggestions" property="improvementSuggestions"/>
        <result column="status" property="status"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="create_by" property="createBy"/>
        <result column="update_by" property="updateBy"/>
        <result column="deleted" property="deleted"/>
    </resultMap>

    <select id="selectByInstitutionId" resultMap="BaseResultMap">
        SELECT * FROM prj_assessment 
        WHERE institution_id = #{institutionId} AND deleted = 0
        ORDER BY assessment_year DESC, assessment_period DESC
    </select>

    <select id="selectByYear" resultMap="BaseResultMap">
        SELECT * FROM prj_assessment 
        WHERE assessment_year = #{year} AND deleted = 0
        ORDER BY assessment_period DESC
    </select>

</mapper>
